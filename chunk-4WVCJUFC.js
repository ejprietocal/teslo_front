import{p as w}from"./chunk-VGTGXULN.js";import{N as l,O as v,Q as a,S as r,Va as E,i as u,j as p,ja as m,m as g,ra as y,x as b}from"./chunk-SNWDAWOK.js";var C=new a("recaptcha-language"),M=new a("recaptcha-base-url"),A=new a("recaptcha-nonce-tag"),ne=new a("recaptcha-settings"),x=new a("recaptcha-v3-site-key"),I=new a("recaptcha-loader-options");function S(t,h,i,{url:e,lang:n,nonce:s}={}){window.ng2recaptchaloaded=()=>{i(grecaptcha)};let o=document.createElement("script");o.innerHTML="";let{url:c,nonce:d}=h(new URL(e||"https://www.google.com/recaptcha/api.js"));c.searchParams.set("render",t==="explicit"?t:t.key),c.searchParams.set("onload","ng2recaptchaloaded"),c.searchParams.set("trustedtypes","true"),n&&c.searchParams.set("hl",n),o.src=c.href;let f=d||s;f&&o.setAttribute("nonce",f),o.async=!0,o.defer=!0,document.head.appendChild(o)}function D({v3SiteKey:t,onBeforeLoad:h,onLoaded:i}){let e=t?{key:t}:"explicit";j.loadScript(e,h,i)}var j={loadScript:S,newLoadScript:D};function O(t){return t.asObservable().pipe(b(h=>h!==null))}var R=(()=>{class t{static{this.ready=null}constructor(i,e,n,s,o,c){this.platformId=i,this.language=e,this.baseUrl=n,this.nonce=s,this.v3SiteKey=o,this.options=c;let d=this.init();this.ready=d?O(d):g()}init(){if(t.ready)return t.ready;if(!w(this.platformId))return;let i=new p(null);return t.ready=i,j.newLoadScript({v3SiteKey:this.v3SiteKey,onBeforeLoad:e=>{if(this.options?.onBeforeLoad)return this.options.onBeforeLoad(e);let n=new URL(this.baseUrl??e);return this.language&&n.searchParams.set("hl",this.language),{url:n,nonce:this.nonce}},onLoaded:e=>{let n=e;this.options?.onLoaded&&(n=this.options.onLoaded(e)),i.next(n)}}),i}static{this.\u0275fac=function(e){return new(e||t)(r(y),r(C,8),r(M,8),r(A,8),r(x,8),r(I,8))}}static{this.\u0275prov=l({token:t,factory:t.\u0275fac})}}return t})();var B=(()=>{class t{constructor(i,e,n){this.recaptchaLoader=e,this.zone=i,this.siteKey=n,this.init()}get onExecute(){return this.onExecuteSubject||(this.onExecuteSubject=new u,this.onExecuteObservable=this.onExecuteSubject.asObservable()),this.onExecuteObservable}get onExecuteError(){return this.onExecuteErrorSubject||(this.onExecuteErrorSubject=new u,this.onExecuteErrorObservable=this.onExecuteErrorSubject.asObservable()),this.onExecuteErrorObservable}execute(i){let e=new u;return this.grecaptcha?this.executeActionWithSubject(i,e):(this.actionBacklog||(this.actionBacklog=[]),this.actionBacklog.push([i,e])),e.asObservable()}executeActionWithSubject(i,e){let n=s=>{this.zone.run(()=>{e.error(s),this.onExecuteErrorSubject&&this.onExecuteErrorSubject.next({action:i,error:s})})};this.zone.runOutsideAngular(()=>{try{this.grecaptcha.execute(this.siteKey,{action:i}).then(s=>{this.zone.run(()=>{e.next(s),e.complete(),this.onExecuteSubject&&this.onExecuteSubject.next({action:i,token:s})})},n)}catch(s){n(s)}})}init(){this.recaptchaLoader.ready.subscribe(i=>{this.grecaptcha=i,this.actionBacklog&&this.actionBacklog.length>0&&(this.actionBacklog.forEach(([e,n])=>this.executeActionWithSubject(e,n)),this.actionBacklog=void 0)})}static{this.\u0275fac=function(e){return new(e||t)(r(m),r(R),r(x))}}static{this.\u0275prov=l({token:t,factory:t.\u0275fac})}}return t})(),se=(()=>{class t{static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275mod=E({type:t})}static{this.\u0275inj=v({providers:[B,R]})}}return t})();export{x as a,B as b,se as c};
