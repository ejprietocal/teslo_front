import{a as V,b as re,c as oe,d as u,e as $,f as ae,i as be,j as he}from"./chunk-FA6765UX.js";import{a as se,c as le,f as ce,j as pe,k as me,l as ue,m as de,o as fe,p as ve}from"./chunk-SPPYWUOE.js";import{a as ge,b as A}from"./chunk-TCIJYHQS.js";import{a as Ce}from"./chunk-KJDIRWLM.js";import{a as ne}from"./chunk-EXBLXLJA.js";import{h as j,j as ie,m as w}from"./chunk-DFY4U5TG.js";import{$ as S,Ab as E,Cb as te,Db as m,Eb as B,Gb as L,Hb as D,Ia as r,N as C,S as R,Sa as b,T as p,Xa as P,_,a as Q,b as Y,bb as l,cb as Z,eb as ee,fb as K,gb as x,hb as M,ib as F,jb as o,kb as a,lb as c,ma as d,mb as I,qb as f,rb as g,x as T,yb as v,zb as X}from"./chunk-5MEIZERQ.js";var k=class e{visible=d(!0);floatMenuVisibility=d(!1);open(){this.visible.set(!0)}close(){this.visible.set(!1)}toggle(){this.visible.update(i=>!i),console.log(this.visible())}toggleFloatMenu(){this.floatMenuVisibility.update(i=>!i)}static \u0275fac=function(t){return new(t||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})};var ke=e=>({fadein:e}),N=class e{drawerService=p(k);darkModeService=p(Ce);router=p(u);faBars=le;faSun=pe;faMoon=ve;faGrip=ue;faXmark=de;faRightFromBracket=se;faUser=ce;logout(){localStorage.removeItem("auth_token"),this.router.navigate([""])}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=b({type:e,selectors:[["app-top-menu"]],decls:14,vars:4,consts:[["floating",""],[1,"h-fit","w-full","max-w-screen","flex","items-center","bg-color-secondary","p-3"],[1,"flex","justify-between","items-center","w-full","text-md"],[1,"flex","items-center","gap-7"],[1,"cursor-pointer",3,"click"],[1,"fa-solid","fa-bars"],[1,"fa-solid","fa-grip"],[1,"fa-solid",3,"ngClass"],["pTooltip","Gesti\xF3n de cuenta",1,"cursor-pointer","hidden","md:block"],[1,"fa-solid","fa-user"],[1,"floating-menu","dark:bg-slate-900/30","bg-slate-200/40","backdrop-blur-2xl","z-50",3,"ngClass"]],template:function(t,n){if(t&1){let s=I();o(0,"nav",1)(1,"ul",2)(2,"li",3)(3,"button",4),f("click",function(){return _(s),S(n.drawerService.toggle())}),c(4,"span",5),a()(),o(5,"li",3)(6,"button",4),f("click",function(){return _(s),S(n.drawerService.toggleFloatMenu())}),c(7,"span",6),a(),o(8,"button",4),f("click",function(){return _(s),S(n.darkModeService.toggleDarkMode())}),c(9,"span",7),a(),o(10,"button",8),c(11,"span",9),a()()()(),c(12,"div",10,0)}t&2&&(r(9),l("ngClass",n.darkModeService.darkMode()?"fa-sun":"fa-moon"),r(3),l("ngClass",m(2,ke,n.drawerService.floatMenuVisibility())))},dependencies:[A,w,j],encapsulation:2})};var O=class e{constructor(i,t,n){this.http=i;this.router=t;this.activateLoader=n}environments=be;datosUser=d(null);checkToken(){this.activateLoader.activateSignal();let i=localStorage.getItem("auth_token");i?this.http.get(this.environments.URL_CHECK_TOKEN,{headers:{Authorization:`Bearer ${i}`}}).subscribe({next:t=>{this.activateLoader.deactivateSignal(),t.token?(this.datosUser.set(t),localStorage.setItem("auth_token",t.token),this.router.url!=="/dashboard"&&!this.router.url.startsWith("/dashboard")&&this.router.navigate(["/dashboard"])):this.router.navigate(["/"])},error:t=>{console.error("Error en la solicitud de login:",t),this.activateLoader.deactivateSignal(),localStorage.removeItem("auth_token"),this.router.navigate(["/"])}}):(this.router.navigate(["/"]),console.log("no hay token"))}static \u0275fac=function(t){return new(t||e)(R(ne),R(u),R(he))};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})};var H=class e{screenHeight=d(window.innerHeight);constructor(){window.addEventListener("resize",this.updateScreenHeight.bind(this))}updateScreenHeight(){this.screenHeight.set(window.innerHeight)}static \u0275fac=function(t){return new(t||e)};static \u0275prov=C({token:e,factory:e.\u0275fac,providedIn:"root"})};var ye=(e,i)=>({"pl-0 pr-0 opacity-0 md:opacity-100":e,"opacity-100":i}),xe=(e,i)=>({"md:relative!  w-70":e,"w-0 md:relative md:w-16":i}),q=e=>({"justify-center":e}),Me=e=>({hidden:e}),U=e=>({"md:hidden":e}),Fe=e=>({"justify-start":e}),Te=(e,i)=>({"max-h-0 overflow-hidden transition-all duration-300 ease-in-out":e,"max-h-96 transition-all duration-300 ease-in-out":i}),Re=()=>["active"];function Ie(e,i){if(e&1&&(o(0,"li",18),v(1),a()),e&2){let t=i.$implicit;l("routerLink",t.link)("routerLinkActive",te(3,Re)),r(),X(t.name)}}function Ee(e,i){if(e&1){let t=I();o(0,"div",7)(1,"button",14),f("click",function(){let s=_(t).$index,h=g();return S(h.toggleSubmenu(s))}),c(2,"span"),o(3,"span",15),v(4),a(),c(5,"fa-icon",16),a(),o(6,"ul",17),M(7,Ie,2,4,"li",18,x),a()()}if(e&2){let t=i.$implicit,n=i.$index,s=g();r(),l("ngClass",m(9,Fe,!s.drawerService.visible())),r(),ee("",t.icon," pe-2 pt-2 pb-2 min-w-10"),r(),l("ngClass",m(11,U,!s.drawerService.visible())),r(),X(t.name),r(),l("icon",s.submenuOpen()[n]?s.faChevronDown:s.faChevronRight)("ngClass",m(13,U,!s.drawerService.visible())),r(),l("ngClass",B(15,Te,!s.submenuOpen()[n]||!s.drawerService.visible(),s.submenuOpen()[n]&&s.drawerService.visible())),r(),F(t.subMenus)}}var z=class e{drawerService=p(k);router=p(u);submenuOpen=d({});toggleSubmenu(i){let t=this.submenuOpen();this.submenuOpen.set(Y(Q({},t),{[i]:!t[i]}))}menuItems=[{name:"Inventario",link:"dashboard",icon:"fa-solid fa-warehouse",subMenus:[{name:"productos",link:"products"},{name:"wareouse",link:"warehouse"},{name:"Suministros",link:"supplies"}]},{name:"Gesti\xF3n de cuenta",link:"dashboard",icon:"fa-solid fa-user",subMenus:[{name:"Gesti\xF3n de cuenta",link:"account"},{name:"Gesti\xF3n de usuarios",link:"users"}]}];screenSizeService=p(H);faChevronRight=fe;faChevronDown=me;logout(){localStorage.removeItem("auth_token"),this.router.navigate([""])}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=b({type:e,selectors:[["app-right-menu"]],decls:18,vars:28,consts:[[1,"h-full","z-50","transition-all","flex","items-start","overflow-hidden",3,"ngClass"],[1,"pl-2","pr-2","duration-200","text-md","fixed","overflow-hidden","bg-color",3,"ngClass"],[1,"flex","items-center","p-3","justify-between","duration-200",3,"ngClass"],[1,"cursor-pointer","fa-solid","fa-web-awesome","p-1",3,"click"],[1,"fa-solid","fa-xmark","cursor-pointer","sm:hidden!",3,"click","ngClass"],[1,"container-menu-right","flex","flex-col","h-[92%]","overflow-hidden","justify-between"],[1,"scrollbar-class","h-full","mb-1","overflow-y-auto","flex","flex-col","gap-1","items-center","justify-start"],[1,"submenu","w-full"],[1,"w-full","flex","flex-col","gap-1"],["pTooltip","Gesti\xF3n de cuenta",1,"flex","md:hidden","items-center","p-1","bg-color-button-right-menu",3,"ngClass"],[1,"p-2","fa-solid","fa-user"],[1,"p-2.5","cursor-pointer","truncate","overflow-hidden","whitespace-nowrap",3,"ngClass"],[1,"flex","items-center","p-1","bg-color-button-right-menu",3,"click","ngClass"],[1,"p-2","fa-solid","fa-right-from-bracket"],[1,"flex","p-2","items-center","bg-module-menu",3,"click","ngClass"],[1,"cursor-pointer","truncate","overflow-hidden","whitespace-nowrap",3,"ngClass"],[1,"me-0","ms-auto","cursor-pointer","truncate","overflow-hidden","whitespace-nowrap",3,"icon","ngClass"],[1,"bg-slate-200","dark:bg-slate-500","dark:text-slate-200","text-slate-600","text-sm","w-full",3,"ngClass"],[1,"bg-module-submenu-item",3,"routerLink","routerLinkActive"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"span",2)(3,"span",3),f("click",function(){return n.router.navigate(["/dashboard"])}),a(),o(4,"span",4),f("click",function(){return n.drawerService.close()}),a()(),o(5,"div",5)(6,"div",6),M(7,Ee,9,18,"div",7,x),a(),o(9,"div",8)(10,"button",9),c(11,"span",10),o(12,"span",11),v(13,"Gesti\xF3n de cuenta"),a()(),o(14,"button",12),f("click",function(){return n.logout()}),c(15,"span",13),o(16,"span",11),v(17,"Cerrar Sesi\xF3n"),a()()()()()()),t&2&&(l("ngClass",B(10,ye,!n.drawerService.visible(),n.drawerService.visible())),r(),Z("height",n.screenSizeService.screenHeight(),"px"),l("ngClass",B(13,xe,n.drawerService.visible(),!n.drawerService.visible())),r(),l("ngClass",m(16,q,!n.drawerService.visible())),r(2),l("ngClass",m(18,Me,!n.drawerService.visible())),r(3),F(n.menuItems),r(3),l("ngClass",m(20,q,!n.drawerService.visible())),r(2),l("ngClass",m(22,U,!n.drawerService.visible())),r(2),l("ngClass",m(24,q,!n.drawerService.visible())),r(2),l("ngClass",m(26,U,!n.drawerService.visible())))},dependencies:[w,j,A,ge,$,ae],encapsulation:2})};var Be=e=>["/",e];function Le(e,i){if(e&1&&(o(0,"div",3),c(1,"span",4),o(2,"a",5),v(3),L(4,"titlecase"),a()()),e&2){let t=g().$implicit;r(2),l("routerLink",m(4,Be,t)),r(),E(" ",D(4,2,t)," ")}}function De(e,i){if(e&1&&(o(0,"a",6),v(1),L(2,"titlecase"),a()),e&2){let t=g(2).$implicit;l("routerLink",t),r(),E(" ",D(2,2,t)," ")}}function je(e,i){if(e&1&&(c(0,"span",7),o(1,"a",6),v(2),L(3,"titlecase"),a()),e&2){let t=g(2).$implicit;r(),l("routerLink",t),r(),E(" ",D(3,2,t)," ")}}function Ve(e,i){if(e&1&&P(0,De,3,4,"a",6)(1,je,4,4),e&2){let t=g(2);K(t.breadcrumb.length===2&&t.breadcrumb[1]===""?0:1)}}function $e(e,i){if(e&1&&(o(0,"li",2),P(1,Le,5,6,"div",3)(2,Ve,2,1),a()),e&2){let t=i.$index;r(),K(t===0?1:2)}}var G=class e{breadcrumb=[];router=p(u);activatedRoute=p(re);routerSuscription=null;constructor(){this.routerSuscription=this.router.events.pipe(T(i=>i instanceof V)).subscribe(()=>{this.breadcrumb=[],this.createBreadcrumb(this.activatedRoute.root),console.log(this.breadcrumb)})}ngOnDestroy(){this.routerSuscription&&this.routerSuscription.unsubscribe()}createBreadcrumb(i,t=""){let n=i.children;if(n.length!==0)for(let s of n){let h=s.snapshot.url.map(we=>we.path).join("/"),Se=`${t}/${h}`;this.breadcrumb.push(h),this.createBreadcrumb(s,Se)}}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=b({type:e,selectors:[["app-bread-cumb"]],decls:4,vars:0,consts:[["aria-label","Breadcrumb",1,"flex"],[1,"inline-flex","items-center","space-x-1","md:space-x-2","rtl:space-x-reverse"],[1,"inline-flex","items-center"],[1,"bg-module-breadcrumb-item"],[1,"fa-solid","fa-house-chimney-crack","fa-fw","mr-1"],[1,"",3,"routerLink"],[1,"bg-module-breadcrumb-item",3,"routerLink"],[1,"fa-solid","fa-chevron-right"]],template:function(t,n){t&1&&(o(0,"nav",0)(1,"ol",1),M(2,$e,3,1,"li",2,x),a()()),t&2&&(r(2),F(n.breadcrumb))},dependencies:[$,w,ie],encapsulation:2})};var J=class e{router=p(u);refreshToken=p(O);routerSubscription;ngOnInit(){this.refreshToken.checkToken(),this.routerSubscription=this.router.events.pipe(T(i=>i instanceof V)).subscribe(()=>{this.refreshToken.checkToken()})}ngOnDestroy(){this.routerSubscription&&this.routerSubscription.unsubscribe()}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=b({type:e,selectors:[["app-dashboard"]],decls:8,vars:0,consts:[[1,"flex","w-full","bg-color-general"],[1,"z-50"],[1,"w-full"],[1,"p-5"],[1,"mb-2"]],template:function(t,n){t&1&&(o(0,"div",0),c(1,"app-right-menu",1),o(2,"div",2),c(3,"app-top-menu"),o(4,"div",3)(5,"div",4),c(6,"app-bread-cumb"),a(),c(7,"router-outlet"),a()()())},dependencies:[z,N,oe,G],encapsulation:2})};export{J as default};
