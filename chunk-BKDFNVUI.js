import{a as z}from"./chunk-FSYD2BTU.js";import{a as J}from"./chunk-TGDN5F4T.js";import{c as q,i as R,j as V,m as A}from"./chunk-YOH5PNVA.js";import{a as L,b as p,c as y,d as F,e as M,f as I,g as j,h as G,i as N,j as T,k as D,m as H}from"./chunk-IATGTTP5.js";import{a as O,b as U}from"./chunk-2GEF7WUZ.js";import{a as k,j as w,m as B,n as P}from"./chunk-EVCG5KFL.js";import{l as E}from"./chunk-A7SWIZTN.js";import{$a as f,Ga as s,La as _,M as S,Qa as C,S as l,Va as b,cb as g,gb as t,hb as e,ib as c,ka as x,nb as d,ub as o}from"./chunk-F233ZM4U.js";var v=class r{environments=B;http=l(k);login(a){return this.http.post(this.environments.URL_LOGIN,a.value)}static \u0275fac=function(n){return new(n||r)};static \u0275prov=S({token:r,factory:r.\u0275fac,providedIn:"root"})};function W(r,a){r&1&&(t(0,"p",15),o(1,"Este campo es requerido"),e())}function X(r,a){r&1&&(t(0,"p",15),o(1,"El formato de correo es invalido"),e())}function Y(r,a){r&1&&(t(0,"p",15),o(1,"Este campo es requerido"),e())}var K=class r{constructor(a){this.darkModeService=a}value="";password="";faBars=q;faSun=R;faMoon=A;faGrip=V;datosUser=x(null);fb=l(N);recaptchaService=l(H);activateLoader=l(P);toast=l(z);loginService=l(v);router=l(w);ngOnInit(){this.activateLoader.deactivateSignal()}ngOnDestroy(){this.onSubmitLogin().unsubscribe()}form=this.fb.group({email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]],recaptchaToken:[""]});onSubmitLogin(){return this.activateLoader.activateSignal(),this.recaptchaService.execute("submitLogin").subscribe(a=>{this.form.get("recaptchaToken")?.setValue(a),this.loginService.login(this.form).subscribe({next:n=>{this.datosUser.set(n),localStorage.setItem("auth_token",n.token)},complete:()=>{this.router.navigate(["/dashboard"]),this.activateLoader.deactivateSignal()},error:n=>{console.error("Error en la solicitud de login:",n),this.activateLoader.deactivateSignal(),localStorage.removeItem("auth_token"),this.toast.show({message:n.error.message,icon:"",color:"error",duration:5e3})}})})}retrieveAccount(){this.router.navigate(["/retrieve-account"])}registration(){this.router.navigate(["/register"])}static \u0275fac=function(n){return new(n||r)(_(J))};static \u0275cmp=C({type:r,selectors:[["app-login"]],decls:43,vars:6,consts:[[1,"md:p-4","sm:pt-0","flex","items-center","justify-center","w-full","md:h-screen","bg-color-general"],[1,"cursor-pointer","absolute","top-2","right-2",3,"click"],[3,"icon"],[1,"w-full","h-screen","max-w-5xl","grid","grid-cols-1","md:grid-cols-2","items-center","justify-center","md:h-fit","overflow-hidden","bg-color","md:rounded-2xl","shadow-xl"],[1,"bg-color","shadow-xl","bg-color-custom","absolute","items-center","justify-center","text-center","top-0","left-0","h-[15rem]","w-full","md:relative","flex","md:w-full","rounded-b-[5rem]","md:rounded-bl-none","md:h-full","md:rounded-r-[15rem]"],[1,"flex","flex-col","items-center","gap-5"],[1,"font-bold","text-4xl"],[1,"text-xl"],[1,"button-behavior",3,"click"],[1,"rounded-2xl","pt-[15rem]","md:pt-0","p-7","md:pb-10","w-full"],[3,"ngSubmit","formGroup"],[1,"font-bold","text-center","uppercase","p-5","text-2xl"],[1,"pt-5","pb-5"],["for","email",1,"block","mt-2","mb-3","text-xl"],["type","email","id","email","name","email","formControlName","email","placeholder","Escribe tu correo","required","",1,"input-behavior"],[1,"text-red-500","text-xs"],[1,"pb-5"],["for","password",1,"block","mt-2","mb-3","text-xl"],["type","password","id","password","name","password","formControlName","password","placeholder","Escribe tu contrase\xF1a","required","",1,"input-behavior"],[1,"flex","items-center","justify-between"],[1,""],["type","submit",1,"bg-color-button","pt-5","pb-5",3,"disabled"],[1,"flex","justify-between","items-center","pt-3"],[1,"text-stone-800","cursor-pointer","dark:text-stone-100","text-sm","hover:text-blue-500",3,"click"],[1,"text-stone-800","dark:text-stone-100","text-sm"],[1,"mt-5","mx-auto","text-center"],[1,"p-5","flex","align-center","justify-center","gap-1"],[1,"button-behavior"],[1,"pi","pi-google"],[1,"pi","pi-apple"]],template:function(n,i){if(n&1&&(t(0,"div",0)(1,"button",1),d("click",function(){return i.darkModeService.toggleDarkMode()}),c(2,"fa-icon",2),e(),t(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2",6),o(7,"Bienvenido!"),e(),t(8,"p",7),o(9,"Inicia sesi\xF3n para continuar"),e(),t(10,"button",8),d("click",function(){return i.registration()}),o(11,"\xBFNo tienes cuenta?"),e()()(),t(12,"div",9)(13,"form",10),d("ngSubmit",function(){return i.onSubmitLogin()}),t(14,"h3",11),o(15,"Ingreso"),e(),t(16,"div",12)(17,"label",13),o(18,"Correo"),e(),c(19,"input",14),b(20,W,2,0,"p",15)(21,X,2,0,"p",15),e(),t(22,"div",16)(23,"label",17),o(24,"Contrase\xF1a"),e(),c(25,"input",18),b(26,Y,2,0,"p",15),e(),c(27,"div",19),t(28,"div",20)(29,"button",21),o(30," Entrar "),e()()(),t(31,"div",22)(32,"button",23),d("click",function(){return i.retrieveAccount()}),o(33,"Recuperar cuenta"),e(),t(34,"button",24),o(35,"Contactanos"),e()(),t(36,"p",25),o(37," ingresar con "),e(),t(38,"div",26)(39,"button",27),c(40,"span",28),e(),t(41,"button",27),c(42,"span",29),e()()()()()),n&2){let m,h,u;s(2),f("icon",i.darkModeService.darkMode()?i.faSun:i.faMoon),s(11),f("formGroup",i.form),s(7),g((m=i.form.get("email"))!=null&&m.hasError("required")&&((m=i.form.get("email"))!=null&&m.touched)?20:-1),s(),g((h=i.form.get("email"))!=null&&h.hasError("email")?21:-1),s(5),g((u=i.form.get("password"))!=null&&u.hasError("required")&&((u=i.form.get("password"))!=null&&u.touched)?26:-1),s(3),f("disabled",i.form.invalid)}},dependencies:[E,T,M,L,y,F,G,D,I,j,U,O],encapsulation:2})};export{K as LoginComponent};
