import{a as E,b as L,c as B,d as x,e as A,f as P,g as U,h as H,i as K}from"./chunk-HHFYTUAA.js";import{a as j,i as y,l as G,m as X}from"./chunk-5IE5ITDA.js";import{g as M,l as w}from"./chunk-7WCTIEEV.js";import{Bb as N,Cb as V,Ga as m,M as h,Qa as a,R as b,S as r,Z as u,_ as d,ab as p,fb as c,gb as l,hb as i,ka as v,lb as R,nb as g}from"./chunk-AJ5LMIAI.js";var s=class t{visible=v(!1);floatMenuVisibility=v(!1);open(){this.visible.set(!0)}close(){this.visible.set(!1)}toggle(){this.visible.update(o=>!o),console.log(this.visible())}toggleFloatMenu(){this.floatMenuVisibility.update(o=>!o)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"})};var $=(t,o)=>({"w-55":t,"w-14":o}),S=class t{drawerService=r(s);static \u0275fac=function(e){return new(e||t)};static \u0275cmp=a({type:t,selectors:[["app-right-menu"]],decls:1,vars:4,consts:[[1,"h-full","bg-color",3,"ngClass"]],template:function(e,n){e&1&&i(0,"div",0),e&2&&p("ngClass",V(1,$,n.drawerService.visible(),!n.drawerService.visible()))},dependencies:[w,M],encapsulation:2})};var T=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=a({type:t,selectors:[["app-content-internal"]],decls:1,vars:0,consts:[[1,"h-full","w-full","bg-color-general"]],template:function(e,n){e&1&&i(0,"div",0)},encapsulation:2})};var _=class t{toggleMenuService=r(s);static \u0275fac=function(e){return new(e||t)};static \u0275cmp=a({type:t,selectors:[["app-content"]],decls:3,vars:0,consts:[[1,"w-screen","flex","h-[calc(100vh-48px)]"],[1,"w-full"]],template:function(e,n){e&1&&(c(0,"div",0),i(1,"app-right-menu")(2,"app-content-internal",1),l())},dependencies:[S,T],encapsulation:2})};var q=t=>({fadein:t}),I=class t{drawerService=r(s);darkModeService=r(K);router=r(y);faBars=L;faSun=B;faMoon=P;faGrip=x;faXmark=A;faRightFromBracket=E;logout(){localStorage.removeItem("auth_token"),this.router.navigate([""])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=a({type:t,selectors:[["app-top-menu"]],decls:14,vars:7,consts:[["floating",""],[1,"h-12","p-2","ps-4","pe-4","w-full","flex","items-center","bg-color","border-b-1"],[1,"flex","justify-between","items-center","w-full","text-xl"],[1,"cursor-pointer",3,"click"],[3,"icon"],[1,"flex","items-center","gap-5"],[1,"floating-menu","bg-color",3,"ngClass"]],template:function(e,n){if(e&1){let C=R();c(0,"nav",1)(1,"ul",2)(2,"li")(3,"button",3),g("click",function(){return u(C),d(n.drawerService.toggle())}),i(4,"fa-icon",4),l()(),c(5,"li",5)(6,"button",3),g("click",function(){return u(C),d(n.drawerService.toggleFloatMenu())}),i(7,"fa-icon",4),l(),c(8,"button",3),g("click",function(){return u(C),d(n.darkModeService.toggleDarkMode())}),i(9,"fa-icon",4),l(),c(10,"button",3),g("click",function(){return u(C),d(n.logout())}),i(11,"fa-icon",4),l()()()(),i(12,"div",6,0)}e&2&&(m(4),p("icon",n.drawerService.visible()?n.faXmark:n.faBars),m(3),p("icon",n.faGrip),m(2),p("icon",n.darkModeService.darkMode()?n.faSun:n.faMoon),m(2),p("icon",n.faRightFromBracket),m(),p("ngClass",N(5,q,n.drawerService.floatMenuVisibility())))},dependencies:[H,U,w,M],encapsulation:2})};var D=class t{constructor(o,e,n){this.http=o;this.router=e;this.activateLoader=n}environments=G;datosUser=v(null);checkToken(){this.activateLoader.activateSignal();let o=localStorage.getItem("auth_token");o?this.http.get(this.environments.URL_CHECK_TOKEN,{headers:{Authorization:`Bearer ${o}`}}).subscribe({next:e=>{this.activateLoader.deactivateSignal(),e.token?(this.datosUser.set(e),localStorage.setItem("auth_token",e.token),this.router.navigate(["/dashboard"])):this.router.navigate(["/"])},error:e=>{console.error("Error en la solicitud de login:",e),this.activateLoader.deactivateSignal(),localStorage.removeItem("auth_token"),this.router.navigate(["/"])}}):(this.router.navigate(["/"]),console.log("no hay token"))}static \u0275fac=function(e){return new(e||t)(b(j),b(y),b(X))};static \u0275prov=h({token:t,factory:t.\u0275fac,providedIn:"root"})};var O=class t{toggleMenuService=r(s);refreshToken=r(D);constructor(){}ngOnInit(){this.refreshToken.checkToken()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=a({type:t,selectors:[["app-dashboard"]],decls:3,vars:0,consts:[[1,"w-screen","h-screen"]],template:function(e,n){e&1&&(c(0,"div",0),i(1,"app-top-menu")(2,"app-content"),l())},dependencies:[_,I],encapsulation:2})};export{O as DashboardComponent};
