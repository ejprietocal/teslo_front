import{b as X,c as b,d as W,e as x,h as te,i as ie}from"./chunk-Z7BJHKV3.js";import{a as I,c as K,f as R,g as $,j as q,l as J,m as Q,n as Y,o as T,q as Z,r as ee}from"./chunk-KFU2M6FS.js";import{a as L,b as E}from"./chunk-CT44KHGR.js";import{a as ne}from"./chunk-ZIXFH4VJ.js";import{a as P}from"./chunk-F3UZMA5T.js";import{h as F,m as M}from"./chunk-M6T7DXHV.js";import{$ as y,Bb as u,Cb as c,Db as _,Ia as r,N as g,S as C,Sa as h,T as p,_ as k,bb as n,cb as z,ib as a,jb as s,kb as l,lb as G,ma as d,pb as m,xb as f}from"./chunk-3MG243OD.js";var w=class t{visible=d(!0);floatMenuVisibility=d(!1);open(){this.visible.set(!0)}close(){this.visible.set(!1)}toggle(){this.visible.update(o=>!o),console.log(this.visible())}toggleFloatMenu(){this.floatMenuVisibility.update(o=>!o)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=g({token:t,factory:t.\u0275fac,providedIn:"root"})};var se=t=>({fadein:t}),j=class t{drawerService=p(w);darkModeService=p(ne);router=p(b);faBars=K;faSun=J;faMoon=ee;faGrip=Y;faXmark=T;faRightFromBracket=I;faUser=R;logout(){localStorage.removeItem("auth_token"),this.router.navigate([""])}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=h({type:t,selectors:[["app-top-menu"]],decls:14,vars:7,consts:[["floating",""],[1,"h-fit","w-full","max-w-screen","flex","items-center","bg-color-secondary","p-3"],[1,"flex","justify-between","items-center","w-full","text-md"],[1,"flex","items-center","gap-7"],[1,"cursor-pointer",3,"click"],[3,"icon"],["pTooltip","Gesti\xF3n de cuenta",1,"cursor-pointer","hidden","md:block"],[1,"floating-menu","dark:bg-slate-900/30","bg-slate-200/40","backdrop-blur-2xl","z-50",3,"ngClass"]],template:function(i,e){if(i&1){let v=G();a(0,"nav",1)(1,"ul",2)(2,"li",3)(3,"button",4),m("click",function(){return k(v),y(e.drawerService.toggle())}),l(4,"fa-icon",5),s()(),a(5,"li",3)(6,"button",4),m("click",function(){return k(v),y(e.drawerService.toggleFloatMenu())}),l(7,"fa-icon",5),s(),a(8,"button",4),m("click",function(){return k(v),y(e.darkModeService.toggleDarkMode())}),l(9,"fa-icon",5),s(),a(10,"button",6),l(11,"fa-icon",5),s()()()(),l(12,"div",7,0)}i&2&&(r(4),n("icon",e.faBars),r(3),n("icon",e.faGrip),r(2),n("icon",e.darkModeService.darkMode()?e.faSun:e.faMoon),r(2),n("icon",e.faUser),r(),n("ngClass",c(5,se,e.drawerService.floatMenuVisibility())))},dependencies:[E,L,M,F],encapsulation:2})};var D=class t{constructor(o,i,e){this.http=o;this.router=i;this.activateLoader=e}environments=te;datosUser=d(null);checkToken(){this.activateLoader.activateSignal();let o=localStorage.getItem("auth_token");o?this.http.get(this.environments.URL_CHECK_TOKEN,{headers:{Authorization:`Bearer ${o}`}}).subscribe({next:i=>{this.activateLoader.deactivateSignal(),i.token?(this.datosUser.set(i),localStorage.setItem("auth_token",i.token),this.router.url!=="/dashboard"&&!this.router.url.startsWith("/dashboard")&&this.router.navigate(["/dashboard"])):this.router.navigate(["/"])},error:i=>{console.error("Error en la solicitud de login:",i),this.activateLoader.deactivateSignal(),localStorage.removeItem("auth_token"),this.router.navigate(["/"])}}):(this.router.navigate(["/"]),console.log("no hay token"))}static \u0275fac=function(i){return new(i||t)(C(P),C(b),C(ie))};static \u0275prov=g({token:t,factory:t.\u0275fac,providedIn:"root"})};var A=class t{screenHeight=d(window.innerHeight);constructor(){window.addEventListener("resize",this.updateScreenHeight.bind(this))}updateScreenHeight(){this.screenHeight.set(window.innerHeight)}static \u0275fac=function(i){return new(i||t)};static \u0275prov=g({token:t,factory:t.\u0275fac,providedIn:"root"})};var le=(t,o)=>({"pl-0 pr-0 opacity-0 md:opacity-100":t,"opacity-100":o}),ce=(t,o)=>({"md:relative!  w-70":t,"w-0 md:relative md:w-16":o}),H=t=>({"justify-center":t}),pe=()=>["/dashboard"],me=t=>({hidden:t}),U=t=>({"md:hidden":t}),ue=(t,o)=>({"max-h-0 overflow-hidden transition-all duration-300 ease-in-out":t,"max-h-96 transition-all duration-300 ease-in-out":o}),de=()=>["products"],O=()=>["active"],fe=()=>["warehouse"],ve=()=>["supplies"],V=class t{drawerService=p(w);router=p(b);screenSizeService=p(A);isInventaryOpen=!1;faXmark=T;faWebAwesome=q;faRightFromBracket=I;faUser=R;faCubesStacked=$;faChevronRight=Z;faChevronDown=Q;logout(){localStorage.removeItem("auth_token"),this.router.navigate([""])}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=h({type:t,selectors:[["app-right-menu"]],decls:29,vars:61,consts:[[1,"h-full","z-50","transition-all","flex","items-start","overflow-hidden",3,"ngClass"],[1,"pl-2","pr-2","duration-200","text-md","fixed","overflow-hidden","bg-color",3,"ngClass"],[1,"flex","items-center","p-3","justify-between","duration-200",3,"ngClass"],[1,"cursor-pointer",3,"icon","routerLink"],[1,"cursor-pointer","sm:hidden",3,"click","icon","ngClass"],[1,"container-menu-right","flex","flex-col","h-[92%]","overflow-hidden","justify-between"],[1,"scrollbar-class","h-full","mb-1","overflow-y-auto","flex","flex-col","gap-1","items-center","justify-start"],[1,"submenu","w-full"],[1,"flex","items-center","bg-module-menu",3,"click","ngClass"],[1,"p-2",3,"icon"],[1,"p-2.5","cursor-pointer","truncate","overflow-hidden","whitespace-nowrap",3,"ngClass"],[1,"p-2.5","me-0","ms-auto","cursor-pointer","truncate","overflow-hidden","whitespace-nowrap",3,"icon","ngClass"],[1,"bg-slate-200","dark:bg-slate-500","dark:text-slate-200","text-slate-600","text-sm","w-full",3,"ngClass"],[1,"bg-module-submenu-item",3,"routerLink","routerLinkActive"],[1,"w-full","flex","flex-col","gap-1"],["pTooltip","Gesti\xF3n de cuenta",1,"flex","md:hidden","items-center","p-1","bg-color-button-right-menu",3,"ngClass"],[1,"flex","items-center","p-1","bg-color-button-right-menu",3,"click","ngClass"]],template:function(i,e){i&1&&(a(0,"div",0)(1,"div",1)(2,"span",2),l(3,"fa-icon",3),a(4,"fa-icon",4),m("click",function(){return e.drawerService.close()}),s()(),a(5,"div",5)(6,"div",6)(7,"div",7)(8,"button",8),m("click",function(){return e.isInventaryOpen=!e.isInventaryOpen}),l(9,"fa-icon",9),a(10,"span",10),f(11,"Inventario"),s(),l(12,"fa-icon",11),s(),a(13,"ul",12)(14,"li",13),f(15,"Productos"),s(),a(16,"li",13),f(17,"Inventario en bodega"),s(),a(18,"li",13),f(19,"Suministros"),s()()()(),a(20,"div",14)(21,"button",15),l(22,"fa-icon",9),a(23,"span",10),f(24,"Gesti\xF3n de cuenta"),s()(),a(25,"button",16),m("click",function(){return e.logout()}),l(26,"fa-icon",9),a(27,"span",10),f(28,"Cerrar Sesi\xF3n"),s()()()()()()),i&2&&(n("ngClass",_(27,le,!e.drawerService.visible(),e.drawerService.visible())),r(),z("height",e.screenSizeService.screenHeight(),"px"),n("ngClass",_(30,ce,e.drawerService.visible(),!e.drawerService.visible())),r(),n("ngClass",c(33,H,!e.drawerService.visible())),r(),n("icon",e.faWebAwesome)("routerLink",u(35,pe)),r(),n("icon",e.faXmark)("ngClass",c(36,me,!e.drawerService.visible())),r(4),n("ngClass",c(38,H,!e.drawerService.visible())),r(),n("icon",e.faCubesStacked),r(),n("ngClass",c(40,U,!e.drawerService.visible())),r(2),n("icon",e.isInventaryOpen?e.faChevronDown:e.faChevronRight)("ngClass",c(42,U,!e.drawerService.visible())),r(),n("ngClass",_(44,ue,!e.isInventaryOpen||!e.drawerService.visible(),e.isInventaryOpen&&e.drawerService.visible())),r(),n("routerLink",u(47,de))("routerLinkActive",u(48,O)),r(2),n("routerLink",u(49,fe))("routerLinkActive",u(50,O)),r(2),n("routerLink",u(51,ve))("routerLinkActive",u(52,O)),r(3),n("ngClass",c(53,H,!e.drawerService.visible())),r(),n("icon",e.faUser),r(),n("ngClass",c(55,U,!e.drawerService.visible())),r(2),n("ngClass",c(57,H,!e.drawerService.visible())),r(),n("icon",e.faRightFromBracket),r(),n("ngClass",c(59,U,!e.drawerService.visible())))},dependencies:[M,F,E,L,W,x],encapsulation:2})};var B=class t{refreshToken=p(D);ngOnInit(){this.refreshToken.checkToken()}static \u0275fac=function(i){return new(i||t)};static \u0275cmp=h({type:t,selectors:[["app-dashboard"]],decls:6,vars:0,consts:[[1,"flex","w-full","bg-color-general"],[1,"z-50"],[1,"w-full"],[1,"p-4"]],template:function(i,e){i&1&&(a(0,"div",0),l(1,"app-right-menu",1),a(2,"div",2),l(3,"app-top-menu"),a(4,"div",3),l(5,"router-outlet"),s()()())},dependencies:[V,j,X],encapsulation:2})};export{B as default};
