import{a as F,b as R,c as j,d as N,e as E,f as L,g as B,h as x,i as U}from"./chunk-HHFYTUAA.js";import{a as _,i as h,l as A,m as P}from"./chunk-5IE5ITDA.js";import{g as I,l as D}from"./chunk-7WCTIEEV.js";import{Cb as T,Ga as f,M as u,Qa as a,R as d,S as r,ab as m,fb as s,gb as p,hb as i,ka as v,nb as g}from"./chunk-AJ5LMIAI.js";var c=class t{visible=v(!1);open(){this.visible.set(!0)}close(){this.visible.set(!1)}toggle(){this.visible.update(o=>!o),console.log(this.visible())}static \u0275fac=function(e){return new(e||t)};static \u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})};var G=(t,o)=>({"w-55":t,"w-14":o}),C=class t{drawerService=r(c);static \u0275fac=function(e){return new(e||t)};static \u0275cmp=a({type:t,selectors:[["app-right-menu"]],decls:1,vars:4,consts:[[1,"h-full","bg-color",3,"ngClass"]],template:function(e,n){e&1&&i(0,"div",0),e&2&&m("ngClass",T(1,G,n.drawerService.visible(),!n.drawerService.visible()))},dependencies:[D,I],encapsulation:2})};var M=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=a({type:t,selectors:[["app-content-internal"]],decls:1,vars:0,consts:[[1,"h-full","w-full","bg-color-general"]],template:function(e,n){e&1&&i(0,"div",0)},encapsulation:2})};var S=class t{toggleMenuService=r(c);static \u0275fac=function(e){return new(e||t)};static \u0275cmp=a({type:t,selectors:[["app-content"]],decls:3,vars:0,consts:[[1,"w-screen","flex","h-[calc(100vh-48px)]"],[1,"w-full"]],template:function(e,n){e&1&&(s(0,"div",0),i(1,"app-right-menu")(2,"app-content-internal",1),p())},dependencies:[C,M],encapsulation:2})};var k=class t{drawerService=r(c);darkModeService=r(U);router=r(h);faBars=R;faSun=j;faMoon=L;faGrip=N;faXmark=E;faRightFromBracket=F;logout(){localStorage.removeItem("auth_token"),this.router.navigate([""])}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=a({type:t,selectors:[["app-top-menu"]],decls:12,vars:4,consts:[[1,"h-12","p-2","ps-4","pe-4","w-full","flex","items-center","bg-color"],[1,"flex","justify-between","items-center","w-full","text-xl"],[1,"cursor-pointer",3,"click"],[3,"icon"],[1,"flex","items-center","gap-5"],[1,"cursor-pointer"]],template:function(e,n){e&1&&(s(0,"nav",0)(1,"ul",1)(2,"li")(3,"button",2),g("click",function(){return n.drawerService.toggle()}),i(4,"fa-icon",3),p()(),s(5,"li",4)(6,"button",5),i(7,"fa-icon",3),p(),s(8,"button",2),g("click",function(){return n.darkModeService.toggleDarkMode()}),i(9,"fa-icon",3),p(),s(10,"button",2),g("click",function(){return n.logout()}),i(11,"fa-icon",3),p()()()()),e&2&&(f(4),m("icon",n.drawerService.visible()?n.faXmark:n.faBars),f(3),m("icon",n.faGrip),f(2),m("icon",n.darkModeService.darkMode()?n.faSun:n.faMoon),f(2),m("icon",n.faRightFromBracket))},dependencies:[x,B],encapsulation:2})};var y=class t{constructor(o,e,n){this.http=o;this.router=e;this.activateLoader=n}environments=A;datosUser=v(null);checkToken(){this.activateLoader.activateSignal();let o=localStorage.getItem("auth_token");o?this.http.get(this.environments.URL_CHECK_TOKEN,{headers:{Authorization:`Bearer ${o}`}}).subscribe({next:e=>{this.activateLoader.deactivateSignal(),e.token?(this.datosUser.set(e),localStorage.setItem("auth_token",e.token),this.router.navigate(["/dashboard"])):this.router.navigate(["/"])},error:e=>{console.error("Error en la solicitud de login:",e),this.activateLoader.deactivateSignal(),localStorage.removeItem("auth_token"),this.router.navigate(["/"])}}):(this.router.navigate(["/"]),console.log("no hay token"))}static \u0275fac=function(e){return new(e||t)(d(_),d(h),d(P))};static \u0275prov=u({token:t,factory:t.\u0275fac,providedIn:"root"})};var H=class t{toggleMenuService=r(c);refreshToken=r(y);constructor(){}ngOnInit(){this.refreshToken.checkToken()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=a({type:t,selectors:[["app-dashboard"]],decls:3,vars:0,consts:[[1,"w-screen","h-screen"]],template:function(e,n){e&1&&(s(0,"div",0),i(1,"app-top-menu")(2,"app-content"),p())},dependencies:[S,k],encapsulation:2})};export{H as DashboardComponent};
