import{a as be,b as he}from"./chunk-SPLDK465.js";import{a as se,c as le,f as ce,j as pe,k as me,l as ue,m as de,o as fe,p as ve}from"./chunk-SPPYWUOE.js";import{a as ge,b as V}from"./chunk-TCIJYHQS.js";import{a as Ce}from"./chunk-KJDIRWLM.js";import{a as N,b as re,c as oe,d,e as H,f as ae}from"./chunk-D4SRA5KC.js";import{a as ne}from"./chunk-EXBLXLJA.js";import{h as $,j as A,m as M}from"./chunk-DFY4U5TG.js";import{$ as B,Ab as C,Cb as W,Db as m,Eb as q,Gb as _,Hb as S,Ia as r,N as k,S as E,Sa as v,T as p,Xa as D,_ as L,ab as X,bb as s,cb as Z,eb as ee,fb as j,gb as w,hb as y,ib as x,jb as o,kb as a,lb as l,ma as h,mb as te,qb as b,rb as g,x as R,yb as u,zb as ie}from"./chunk-5MEIZERQ.js";var F=class e{visible=h(!0);floatMenuVisibility=h(!1);open(){this.visible.set(!0)}close(){this.visible.set(!1)}toggle(){this.visible.update(i=>!i),console.log(this.visible())}toggleFloatMenu(){this.floatMenuVisibility.update(i=>!i)}static \u0275fac=function(t){return new(t||e)};static \u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"})};var we=e=>({fadein:e}),U=class e{drawerService=p(F);darkModeService=p(Ce);router=p(d);faBars=le;faSun=pe;faMoon=ve;faGrip=ue;faXmark=de;faRightFromBracket=se;faUser=ce;logout(){localStorage.removeItem("auth_token"),this.router.navigate([""])}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=v({type:e,selectors:[["app-top-menu"]],decls:14,vars:4,consts:[["floating",""],[1,"h-fit","w-full","max-w-screen","flex","items-center","bg-color-secondary","p-3"],[1,"flex","justify-between","items-center","w-full","text-md"],[1,"flex","items-center","gap-7"],[1,"cursor-pointer",3,"click"],[1,"fa-solid","fa-bars"],[1,"fa-solid","fa-grip"],[1,"fa-solid",3,"ngClass"],["pTooltip","Gesti\xF3n de cuenta",1,"cursor-pointer","hidden","md:block"],[1,"fa-solid","fa-user"],[1,"floating-menu","dark:bg-slate-900/30","bg-slate-200/40","backdrop-blur-2xl","z-50",3,"ngClass"]],template:function(t,n){if(t&1){let c=te();o(0,"nav",1)(1,"ul",2)(2,"li",3)(3,"button",4),b("click",function(){return L(c),B(n.drawerService.toggle())}),l(4,"span",5),a()(),o(5,"li",3)(6,"button",4),b("click",function(){return L(c),B(n.drawerService.toggleFloatMenu())}),l(7,"span",6),a(),o(8,"button",4),b("click",function(){return L(c),B(n.darkModeService.toggleDarkMode())}),l(9,"span",7),a(),o(10,"button",8),l(11,"span",9),a()()()(),l(12,"div",10,0)}t&2&&(r(9),s("ngClass",n.darkModeService.darkMode()?"fa-sun":"fa-moon"),r(3),s("ngClass",m(2,we,n.drawerService.floatMenuVisibility())))},dependencies:[V,M,$],encapsulation:2})};var z=class e{constructor(i,t,n){this.http=i;this.router=t;this.activateLoader=n}environments=be;datosUser=h(null);checkToken(){this.activateLoader.activateSignal();let i=localStorage.getItem("auth_token");i?this.http.get(this.environments.URL_CHECK_TOKEN,{headers:{Authorization:`Bearer ${i}`}}).subscribe({next:t=>{this.activateLoader.deactivateSignal(),t.token?(this.datosUser.set(t),localStorage.setItem("auth_token",t.token),this.router.url!=="/dashboard"&&!this.router.url.startsWith("/dashboard")&&this.router.navigate(["/dashboard"])):this.router.navigate(["/"])},error:t=>{console.error("Error en la solicitud de login:",t),this.activateLoader.deactivateSignal(),localStorage.removeItem("auth_token"),this.router.navigate(["/"])}}):(this.router.navigate(["/"]),console.log("no hay token"))}static \u0275fac=function(t){return new(t||e)(E(ne),E(d),E(he))};static \u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"})};var G=class e{screenHeight=h(window.innerHeight);constructor(){window.addEventListener("resize",this.updateScreenHeight.bind(this))}updateScreenHeight(){this.screenHeight.set(window.innerHeight)}static \u0275fac=function(t){return new(t||e)};static \u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"})};var ye=(e,i)=>({"pl-0 pr-0 opacity-0 md:opacity-100":e,"opacity-100":i}),xe=(e,i)=>({"md:relative!  w-70":e,"w-0 md:relative md:w-16":i}),Q=e=>({"justify-center":e}),Se=e=>({hidden:e}),O=e=>({"md:hidden":e}),ke=e=>({"justify-start":e}),Me=()=>["activeSub"],Fe=()=>["active"];function Te(e,i){if(e&1&&(o(0,"li",23),l(1,"span",24),u(2),_(3,"titlecase"),a()),e&2){let t=i.$implicit;s("routerLink",t.link)("routerLinkActive",W(6,Me)),r(),s("ngClass",t.icon),r(),C(" ",S(3,4,t.name)," ")}}function Ie(e,i){if(e&1&&(o(0,"div",18)(1,"button",20),u(2),_(3,"titlecase"),l(4,"fa-icon",21),a(),o(5,"ul",22),y(6,Te,4,7,"li",23,w),a()()),e&2){let t=g(),n=t.$implicit,c=t.$index,f=g(2);r(),s("ngClass",m(7,ke,!f.drawerService.visible())),X("data-collapse-toggle","subsubmenu"+c+"-"+c),r(),C(" ",S(3,5,n.name)," "),r(2),s("icon",f.faChevronDown),r(),s("id","subsubmenu"+c+"-"+c),r(),x(n.subMenus)}}function Re(e,i){if(e&1&&(o(0,"li",19),u(1),_(2,"titlecase"),a()),e&2){let t=g().$implicit;s("routerLink",t.link)("routerLinkActive",W(5,Fe)),r(),C(" ",S(2,3,t.name)," ")}}function Ee(e,i){if(e&1&&D(0,Ie,8,9,"div",18)(1,Re,3,6,"li",19),e&2){let t=i.$implicit;j(t.subMenus?0:1)}}function Le(e,i){if(e&1&&(o(0,"div",7)(1,"button",14),l(2,"span"),o(3,"span",15),u(4),a(),l(5,"fa-icon",16),a(),o(6,"ul",17),y(7,Ee,2,1,null,null,w),a()()),e&2){let t=i.$implicit,n=i.$index,c=g();r(),s("ngClass",m(11,ke,!c.drawerService.visible())),X("data-collapse-toggle","submenu"+n),r(),ee("",t.icon," pe-2 pt-2 pb-2 min-w-10"),r(),s("ngClass",m(13,O,!c.drawerService.visible())),r(),ie(t.name),r(),s("icon",c.faChevronDown)("ngClass",m(15,O,!c.drawerService.visible())),r(),s("id","submenu"+n)("ngClass",m(17,Se,!c.drawerService.visible())),r(),x(t.subMenus)}}var P=class e{drawerService=p(F);router=p(d);menuItems=[{name:"Inventario",icon:"fa-solid fa-warehouse",subMenus:[{name:"productos",link:"products",subMenus:[{name:"items",icon:"fa-solid fa-right-long",link:"products/items"},{name:"variantes",icon:"fa-solid fa-right-long",link:"products/variantes"},{name:"categor\xEDas",icon:"fa-solid fa-right-long",link:"products/categories"},{name:"subcategor\xEDas",icon:"fa-solid fa-right-long",link:"products/sub-categories"}]}]},{name:"Gesti\xF3n de cuenta",icon:"fa-solid fa-user",subMenus:[{name:"Gesti\xF3n de cuenta",link:"account"},{name:"Gesti\xF3n de usuarios",link:"users"}]}];screenSizeService=p(G);faChevronRight=fe;faChevronDown=me;logout(){localStorage.removeItem("auth_token"),this.router.navigate([""])}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=v({type:e,selectors:[["app-right-menu"]],decls:18,vars:28,consts:[[1,"h-full","z-50","transition-all","flex","items-start","overflow-hidden",3,"ngClass"],[1,"pl-2","pr-2","duration-200","text-md","fixed","overflow-hidden","bg-color",3,"ngClass"],[1,"flex","items-center","p-3","justify-between","duration-200",3,"ngClass"],[1,"cursor-pointer","fa-solid","fa-web-awesome","p-1",3,"click"],[1,"fa-solid","fa-xmark","cursor-pointer","sm:hidden!",3,"click","ngClass"],[1,"container-menu-right","flex","flex-col","h-[92%]","overflow-hidden","justify-between"],[1,"scrollbar-class","h-full","mb-1","overflow-y-auto","flex","flex-col","gap-1","items-center","justify-start"],[1,"submenu","w-full"],[1,"w-full","flex","flex-col","gap-1"],["pTooltip","Gesti\xF3n de cuenta",1,"flex","md:hidden","items-center","p-1","bg-color-button-right-menu",3,"ngClass"],[1,"p-2","fa-solid","fa-user"],[1,"p-2.5","cursor-pointer","truncate","overflow-hidden","whitespace-nowrap",3,"ngClass"],[1,"flex","items-center","p-1","bg-color-button-right-menu",3,"click","ngClass"],[1,"p-2","fa-solid","fa-right-from-bracket"],["type","button",1,"flex","p-2","items-center","bg-module-menu",3,"ngClass"],[1,"truncate",3,"ngClass"],[1,"me-0","ms-auto","cursor-pointer","truncate","overflow-hidden","whitespace-nowrap",3,"icon","ngClass"],[1,"bg-slate-200","dark:bg-slate-500","text-sm","w-full",3,"id","ngClass"],[1,"bg-slate-300","dark:bg-slate-600","pb-1","mb-2"],[1,"bg-module-submenu-item",3,"routerLink","routerLinkActive"],["type","button",1,"flex","p-2","w-full","bg-module-submenu-item",3,"ngClass"],[1,"ms-auto",3,"icon"],[1,"hidden",3,"id"],[1,"bg-module-subsubmenu-item",3,"routerLink","routerLinkActive"],[3,"ngClass"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"span",2)(3,"span",3),b("click",function(){return n.router.navigate(["/dashboard"])}),a(),o(4,"span",4),b("click",function(){return n.drawerService.close()}),a()(),o(5,"div",5)(6,"div",6),y(7,Le,9,19,"div",7,w),a(),o(9,"div",8)(10,"button",9),l(11,"span",10),o(12,"span",11),u(13,"Gesti\xF3n de cuenta"),a()(),o(14,"button",12),b("click",function(){return n.logout()}),l(15,"span",13),o(16,"span",11),u(17,"Cerrar Sesi\xF3n"),a()()()()()()),t&2&&(s("ngClass",q(10,ye,!n.drawerService.visible(),n.drawerService.visible())),r(),Z("height",n.screenSizeService.screenHeight(),"px"),s("ngClass",q(13,xe,n.drawerService.visible(),!n.drawerService.visible())),r(),s("ngClass",m(16,Q,!n.drawerService.visible())),r(2),s("ngClass",m(18,Se,!n.drawerService.visible())),r(3),x(n.menuItems),r(3),s("ngClass",m(20,Q,!n.drawerService.visible())),r(2),s("ngClass",m(22,O,!n.drawerService.visible())),r(2),s("ngClass",m(24,Q,!n.drawerService.visible())),r(2),s("ngClass",m(26,O,!n.drawerService.visible())))},dependencies:[M,$,A,V,ge,H,ae],encapsulation:2})};function Be(e,i){if(e&1&&(o(0,"div",3),l(1,"span",4),o(2,"a",5),u(3),_(4,"titlecase"),a()()),e&2){let t=g().$implicit;r(2),s("routerLink",t.url),r(),C(" ",S(4,2,t.label)," ")}}function De(e,i){if(e&1&&(l(0,"span",6),o(1,"a",7),u(2),_(3,"titlecase"),a()),e&2){let t=g().$implicit;r(),s("routerLink",t.url),r(),C(" ",S(3,2,t.label)," ")}}function je(e,i){if(e&1&&(o(0,"li",2),D(1,Be,5,4,"div",3)(2,De,4,4),a()),e&2){let t=i.$index;r(),j(t===0?1:2)}}var K=class e{breadcrumb=[];router=p(d);activatedRoute=p(re);routerSuscription=null;constructor(){this.routerSuscription=this.router.events.pipe(R(i=>i instanceof N)).subscribe(()=>{this.breadcrumb=[],this.createBreadcrumb(this.activatedRoute.root),console.log(this.breadcrumb)})}ngOnDestroy(){this.routerSuscription&&this.routerSuscription.unsubscribe()}createBreadcrumb(i,t=""){let n=i.children;if(n.length!==0)for(let c of n){let f=c.snapshot.url.map(I=>I.path).join("/");if(f!==""){let I=`${t}/${f}`;this.breadcrumb.push({label:f,url:I}),this.createBreadcrumb(c,I)}}}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=v({type:e,selectors:[["app-bread-cumb"]],decls:4,vars:0,consts:[["aria-label","Breadcrumb",1,"flex"],[1,"inline-flex","items-center","space-x-1","md:space-x-2","rtl:space-x-reverse"],[1,"inline-flex","items-center"],[1,"bg-module-breadcrumb-item"],[1,"fa-solid","fa-house-chimney-crack","fa-fw","mr-1"],[3,"routerLink"],[1,"fa-solid","fa-chevron-right","mx-2"],[1,"bg-module-breadcrumb-item",3,"routerLink"]],template:function(t,n){t&1&&(o(0,"nav",0)(1,"ol",1),y(2,je,3,1,"li",2,w),a()()),t&2&&(r(2),x(n.breadcrumb))},dependencies:[H,M,A],encapsulation:2})};var Y=class e{router=p(d);refreshToken=p(z);routerSubscription;ngOnInit(){this.refreshToken.checkToken(),this.routerSubscription=this.router.events.pipe(R(i=>i instanceof N)).subscribe(()=>{this.refreshToken.checkToken()})}ngOnDestroy(){this.routerSubscription&&this.routerSubscription.unsubscribe()}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=v({type:e,selectors:[["app-dashboard"]],decls:8,vars:0,consts:[[1,"flex","w-full","bg-color-general"],[1,"z-50"],[1,"w-full"],[1,"p-5"],[1,"mb-2"]],template:function(t,n){t&1&&(o(0,"div",0),l(1,"app-right-menu",1),o(2,"div",2),l(3,"app-top-menu"),o(4,"div",3)(5,"div",4),l(6,"app-bread-cumb"),a(),l(7,"router-outlet"),a()()())},dependencies:[P,U,oe,K],encapsulation:2})};export{Y as default};
