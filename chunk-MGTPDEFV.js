import{a as W,c as q,d as f,e as J,f as Q,i as se,j as ce}from"./chunk-FA6765UX.js";import{a as Y,c as Z,f as ee,j as te,k as ie,l as ne,m as re,o as oe,p as ae}from"./chunk-SPPYWUOE.js";import{a as le,b as T}from"./chunk-TCIJYHQS.js";import{a as pe}from"./chunk-KJDIRWLM.js";import{a as X}from"./chunk-EXBLXLJA.js";import{h as F,m as x}from"./chunk-DFY4U5TG.js";import{$ as h,Cb as K,Db as p,Eb as M,Ia as o,N as v,S as _,Sa as b,T as u,_ as g,a as G,b as B,bb as s,cb as $,eb as P,gb as L,hb as V,ib as H,jb as r,kb as l,lb as c,ma as m,mb as y,qb as d,rb as N,x as U,yb as C,zb as O}from"./chunk-5MEIZERQ.js";var w=class e{visible=m(!0);floatMenuVisibility=m(!1);open(){this.visible.set(!0)}close(){this.visible.set(!1)}toggle(){this.visible.update(i=>!i),console.log(this.visible())}toggleFloatMenu(){this.floatMenuVisibility.update(i=>!i)}static \u0275fac=function(t){return new(t||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})};var de=e=>({fadein:e}),I=class e{drawerService=u(w);darkModeService=u(pe);router=u(f);faBars=Z;faSun=te;faMoon=ae;faGrip=ne;faXmark=re;faRightFromBracket=Y;faUser=ee;logout(){localStorage.removeItem("auth_token"),this.router.navigate([""])}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=b({type:e,selectors:[["app-top-menu"]],decls:14,vars:4,consts:[["floating",""],[1,"h-fit","w-full","max-w-screen","flex","items-center","bg-color-secondary","p-3"],[1,"flex","justify-between","items-center","w-full","text-md"],[1,"flex","items-center","gap-7"],[1,"cursor-pointer",3,"click"],[1,"fa-solid","fa-bars"],[1,"fa-solid","fa-grip"],[1,"fa-solid",3,"ngClass"],["pTooltip","Gesti\xF3n de cuenta",1,"cursor-pointer","hidden","md:block"],[1,"fa-solid","fa-user"],[1,"floating-menu","dark:bg-slate-900/30","bg-slate-200/40","backdrop-blur-2xl","z-50",3,"ngClass"]],template:function(t,n){if(t&1){let a=y();r(0,"nav",1)(1,"ul",2)(2,"li",3)(3,"button",4),d("click",function(){return g(a),h(n.drawerService.toggle())}),c(4,"span",5),l()(),r(5,"li",3)(6,"button",4),d("click",function(){return g(a),h(n.drawerService.toggleFloatMenu())}),c(7,"span",6),l(),r(8,"button",4),d("click",function(){return g(a),h(n.darkModeService.toggleDarkMode())}),c(9,"span",7),l(),r(10,"button",8),c(11,"span",9),l()()()(),c(12,"div",10,0)}t&2&&(o(9),s("ngClass",n.darkModeService.darkMode()?"fa-sun":"fa-moon"),o(3),s("ngClass",p(2,de,n.drawerService.floatMenuVisibility())))},dependencies:[T,x,F],encapsulation:2})};var R=class e{constructor(i,t,n){this.http=i;this.router=t;this.activateLoader=n}environments=se;datosUser=m(null);checkToken(){this.activateLoader.activateSignal();let i=localStorage.getItem("auth_token");i?this.http.get(this.environments.URL_CHECK_TOKEN,{headers:{Authorization:`Bearer ${i}`}}).subscribe({next:t=>{this.activateLoader.deactivateSignal(),t.token?(this.datosUser.set(t),localStorage.setItem("auth_token",t.token),this.router.url!=="/dashboard"&&!this.router.url.startsWith("/dashboard")&&this.router.navigate(["/dashboard"])):this.router.navigate(["/"])},error:t=>{console.error("Error en la solicitud de login:",t),this.activateLoader.deactivateSignal(),localStorage.removeItem("auth_token"),this.router.navigate(["/"])}}):(this.router.navigate(["/"]),console.log("no hay token"))}static \u0275fac=function(t){return new(t||e)(_(X),_(f),_(ce))};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})};var E=class e{screenHeight=m(window.innerHeight);constructor(){window.addEventListener("resize",this.updateScreenHeight.bind(this))}updateScreenHeight(){this.screenHeight.set(window.innerHeight)}static \u0275fac=function(t){return new(t||e)};static \u0275prov=v({token:e,factory:e.\u0275fac,providedIn:"root"})};var fe=(e,i)=>({"pl-0 pr-0 opacity-0 md:opacity-100":e,"opacity-100":i}),ve=(e,i)=>({"md:relative!  w-70":e,"w-0 md:relative md:w-16":i}),A=e=>({"justify-center":e}),ge=e=>({hidden:e}),j=e=>({"md:hidden":e}),he=e=>({"justify-start":e}),be=(e,i)=>({"max-h-0 overflow-hidden transition-all duration-300 ease-in-out":e,"max-h-96 transition-all duration-300 ease-in-out":i}),we=()=>["active"];function Ce(e,i){if(e&1&&(r(0,"li",18),C(1),l()),e&2){let t=i.$implicit;s("routerLink",t.link)("routerLinkActive",K(3,we)),o(),O(t.name)}}function ke(e,i){if(e&1){let t=y();r(0,"div",7)(1,"button",14),d("click",function(){let a=g(t).$index,S=N();return h(S.toggleSubmenu(a))}),c(2,"span"),r(3,"span",15),C(4),l(),c(5,"fa-icon",16),l(),r(6,"ul",17),V(7,Ce,2,4,"li",18,L),l()()}if(e&2){let t=i.$implicit,n=i.$index,a=N();o(),s("ngClass",p(9,he,!a.drawerService.visible())),o(),P("",t.icon," pe-2 pt-2 pb-2 min-w-10"),o(),s("ngClass",p(11,j,!a.drawerService.visible())),o(),O(t.name),o(),s("icon",a.submenuOpen()[n]?a.faChevronDown:a.faChevronRight)("ngClass",p(13,j,!a.drawerService.visible())),o(),s("ngClass",M(15,be,!a.submenuOpen()[n]||!a.drawerService.visible(),a.submenuOpen()[n]&&a.drawerService.visible())),o(),H(t.subMenus)}}var D=class e{drawerService=u(w);router=u(f);submenuOpen=m({});toggleSubmenu(i){let t=this.submenuOpen();this.submenuOpen.set(B(G({},t),{[i]:!t[i]}))}menuItems=[{name:"Inventario",link:"dashboard",icon:"fa-solid fa-warehouse",subMenus:[{name:"productos",link:"products"},{name:"wareouse",link:"warehouse"},{name:"Suministros",link:"supplies"}]},{name:"Gesti\xF3n de cuenta",link:"dashboard",icon:"fa-solid fa-user",subMenus:[{name:"Gesti\xF3n de cuenta",link:"account"},{name:"Gesti\xF3n de usuarios",link:"users"}]}];screenSizeService=u(E);faChevronRight=oe;faChevronDown=ie;logout(){localStorage.removeItem("auth_token"),this.router.navigate([""])}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=b({type:e,selectors:[["app-right-menu"]],decls:18,vars:28,consts:[[1,"h-full","z-50","transition-all","flex","items-start","overflow-hidden",3,"ngClass"],[1,"pl-2","pr-2","duration-200","text-md","fixed","overflow-hidden","bg-color",3,"ngClass"],[1,"flex","items-center","p-3","justify-between","duration-200",3,"ngClass"],[1,"cursor-pointer","fa-solid","fa-web-awesome","p-1",3,"click"],[1,"fa-solid","fa-xmark","cursor-pointer","sm:hidden!",3,"click","ngClass"],[1,"container-menu-right","flex","flex-col","h-[92%]","overflow-hidden","justify-between"],[1,"scrollbar-class","h-full","mb-1","overflow-y-auto","flex","flex-col","gap-1","items-center","justify-start"],[1,"submenu","w-full"],[1,"w-full","flex","flex-col","gap-1"],["pTooltip","Gesti\xF3n de cuenta",1,"flex","md:hidden","items-center","p-1","bg-color-button-right-menu",3,"ngClass"],[1,"p-2","fa-solid","fa-user"],[1,"p-2.5","cursor-pointer","truncate","overflow-hidden","whitespace-nowrap",3,"ngClass"],[1,"flex","items-center","p-1","bg-color-button-right-menu",3,"click","ngClass"],[1,"p-2","fa-solid","fa-right-from-bracket"],[1,"flex","p-2","items-center","bg-module-menu",3,"click","ngClass"],[1,"cursor-pointer","truncate","overflow-hidden","whitespace-nowrap",3,"ngClass"],[1,"me-0","ms-auto","cursor-pointer","truncate","overflow-hidden","whitespace-nowrap",3,"icon","ngClass"],[1,"bg-slate-200","dark:bg-slate-500","dark:text-slate-200","text-slate-600","text-sm","w-full",3,"ngClass"],[1,"bg-module-submenu-item",3,"routerLink","routerLinkActive"]],template:function(t,n){t&1&&(r(0,"div",0)(1,"div",1)(2,"span",2)(3,"span",3),d("click",function(){return n.router.navigate(["/dashboard"])}),l(),r(4,"span",4),d("click",function(){return n.drawerService.close()}),l()(),r(5,"div",5)(6,"div",6),V(7,ke,9,18,"div",7,L),l(),r(9,"div",8)(10,"button",9),c(11,"span",10),r(12,"span",11),C(13,"Gesti\xF3n de cuenta"),l()(),r(14,"button",12),d("click",function(){return n.logout()}),c(15,"span",13),r(16,"span",11),C(17,"Cerrar Sesi\xF3n"),l()()()()()()),t&2&&(s("ngClass",M(10,fe,!n.drawerService.visible(),n.drawerService.visible())),o(),$("height",n.screenSizeService.screenHeight(),"px"),s("ngClass",M(13,ve,n.drawerService.visible(),!n.drawerService.visible())),o(),s("ngClass",p(16,A,!n.drawerService.visible())),o(2),s("ngClass",p(18,ge,!n.drawerService.visible())),o(3),H(n.menuItems),o(3),s("ngClass",p(20,A,!n.drawerService.visible())),o(2),s("ngClass",p(22,j,!n.drawerService.visible())),o(2),s("ngClass",p(24,A,!n.drawerService.visible())),o(2),s("ngClass",p(26,j,!n.drawerService.visible())))},dependencies:[x,F,T,le,J,Q],encapsulation:2})};var z=class e{router=u(f);refreshToken=u(R);ngOnInit(){this.refreshToken.checkToken(),this.router.events.pipe(U(i=>i instanceof W)).subscribe(()=>{this.refreshToken.checkToken()})}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=b({type:e,selectors:[["app-dashboard"]],decls:6,vars:0,consts:[[1,"flex","w-full","bg-color-general"],[1,"z-50"],[1,"w-full"],[1,"p-4"]],template:function(t,n){t&1&&(r(0,"div",0),c(1,"app-right-menu",1),r(2,"div",2),c(3,"app-top-menu"),r(4,"div",3),c(5,"router-outlet"),l()()())},dependencies:[D,I,q],encapsulation:2})};export{z as default};
