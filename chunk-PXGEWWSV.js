import{c as V,h as H,i as P,l as O}from"./chunk-Z7PGRBI2.js";import{a as W,b as X}from"./chunk-6TDIML5V.js";import{c as U,d as A,e as B}from"./chunk-S5AILMS7.js";import{b as L,c as p,e as M,f as F,h as j,i as I,j as G,k as R,l as N,m as q,n as D,r as K}from"./chunk-SHPJEKSR.js";import"./chunk-WCGJ44IN.js";import{c as z,d as J}from"./chunk-57JESLB6.js";import{X as T,a as w,fa as Q,i as S}from"./chunk-G347OPM3.js";import{o as k}from"./chunk-IUWGFL7T.js";import{Cb as r,Ga as m,La as f,M as E,Qa as y,R as d,S as x,Va as _,ab as v,fb as g,jb as t,ka as u,kb as e,lb as s,tb as b}from"./chunk-3FDBIDRX.js";var h=class n{constructor(a,o,i,l){this.http=a;this.router=o;this.messageService=i;this.activateLoader=l}toast;environments=Q;datosUser=u(null);login(a){this.activateLoader.activateSignal(),this.http.post(this.environments.URL_LOGIN,a.value).subscribe({next:o=>{this.datosUser.set(o),this.activateLoader.deactivateSignal(),localStorage.setItem("auth_token",o.token),this.router.navigate(["/dashboard"])},error:o=>{console.error("Error en la solicitud de login:",o),this.activateLoader.deactivateSignal(),localStorage.removeItem("auth_token"),this.messageService.add({severity:"error",summary:"Error",detail:o.error.message,life:2e3})}})}static \u0275fac=function(o){return new(o||n)(d(w),d(S),d(T),d(W))};static \u0275prov=E({token:n,factory:n.\u0275fac,providedIn:"root"})};function te(n,a){n&1&&(t(0,"p",15),r(1,"Este campo es requerido"),e())}function ie(n,a){n&1&&(t(0,"p",15),r(1,"El formato de correo es invalido"),e())}function oe(n,a){n&1&&(t(0,"p",15),r(1,"Este campo es requerido"),e())}var Y=class n{constructor(a,o,i){this.loginService=a;this.router=o;this.darkModeService=i}value="";password="";faBars=V;faSun=H;faMoon=O;faGrip=P;datosUser=u(null);fb=x(N);recaptchaService=x(K);form=this.fb.group({email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]],recaptchaToken:[""]});onSubmitLogin(){this.recaptchaService.execute("submitLogin").subscribe(a=>{this.form.get("recaptchaToken")?.setValue(a),this.loginService.login(this.form)})}registration(){this.router.navigate(["/register"])}static \u0275fac=function(o){return new(o||n)(f(h),f(S),f(X))};static \u0275cmp=y({type:n,selectors:[["app-login"]],decls:43,vars:6,consts:[[1,"md:p-4","sm:pt-0","flex","items-center","justify-center","w-full","md:h-screen","bg-color-general"],[1,"cursor-pointer","absolute","top-2","right-2",3,"click"],[3,"icon"],[1,"w-full","h-screen","max-w-7xl","grid","grid-cols-1","md:grid-cols-2","items-center","justify-center","md:h-fit","overflow-hidden","bg-color","md:rounded-2xl","shadow-xl"],[1,"bg-color","shadow-xl","bg-color-custom","absolute","items-center","justify-center","text-center","top-0","left-0","h-[15rem]","w-full","md:relative","flex","md:w-full","rounded-b-[5rem]","md:rounded-bl-none","md:h-full","md:rounded-r-[15rem]"],[1,"flex","flex-col","items-center","gap-5"],[1,"font-bold","text-4xl"],[1,"text-xl"],[1,"button-behavior",3,"click"],[1,"rounded-2xl","pt-[15rem]","md:pt-0","p-7","md:pb-10","w-full"],[3,"ngSubmit","formGroup"],[1,"font-bold","text-center","uppercase","p-5","text-2xl"],[1,"pt-5","pb-5"],["for","email",1,"block","mt-2","mb-3","text-xl"],["type","email","id","email","name","email","formControlName","email","placeholder","Escribe tu correo","required","",1,"input-behavior"],[1,"text-red-500","text-xs"],[1,"pb-5"],["for","password",1,"block","mt-2","mb-3","text-xl"],["type","password","id","password","name","password","formControlName","password","placeholder","Escribe tu contrase\xF1a","required","",1,"input-behavior"],[1,"flex","items-center","justify-between"],[1,""],["type","submit",1,"bg-color-button","pt-5","pb-5",3,"disabled"],[1,"flex","justify-between","items-center"],[1,"text-stone-800","cursor-pointer","dark:text-stone-100","text-sm","hover:text-blue-500"],[1,"text-stone-800","dark:text-stone-100","text-sm"],[1,"mt-5","mx-auto","text-center"],[1,"p-5","flex","align-center","justify-center","gap-1"],[1,"button-behavior"],[1,"pi","pi-google"],[1,"pi","pi-apple"]],template:function(o,i){if(o&1&&(t(0,"div",0)(1,"button",1),b("click",function(){return i.darkModeService.toggleDarkMode()}),s(2,"fa-icon",2),e(),t(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2",6),r(7,"Bienvenido!"),e(),t(8,"p",7),r(9,"Inicia sesi\xF3n para continuar"),e(),t(10,"button",8),b("click",function(){return i.registration()}),r(11,"\xBFNo tienes cuenta?"),e()()(),t(12,"div",9)(13,"form",10),b("ngSubmit",function(){return i.onSubmitLogin()}),t(14,"h3",11),r(15,"Ingreso"),e(),t(16,"div",12)(17,"label",13),r(18,"Correo"),e(),s(19,"input",14),_(20,te,2,0,"p",15)(21,ie,2,0,"p",15),e(),t(22,"div",16)(23,"label",17),r(24,"Contrase\xF1a"),e(),s(25,"input",18),_(26,oe,2,0,"p",15),e(),s(27,"div",19),t(28,"div",20)(29,"button",21),r(30," Entrar "),e()()(),t(31,"div",22)(32,"button",23),r(33,"Recuperar cuenta"),e(),t(34,"button",24),r(35,"Contactanos"),e()(),t(36,"p",25),r(37," ingresar con "),e(),t(38,"div",26)(39,"button",27),s(40,"span",28),e(),t(41,"button",27),s(42,"span",29),e()()()()()),o&2){let l,C,c;m(2),v("icon",i.darkModeService.darkMode()?i.faSun:i.faMoon),m(11),v("formGroup",i.form),m(7),g((l=i.form.get("email"))!=null&&l.hasError("required")&&((l=i.form.get("email"))!=null&&l.touched)?20:-1),m(),g((C=i.form.get("email"))!=null&&C.hasError("email")?21:-1),m(5),g((c=i.form.get("password"))!=null&&c.hasError("required")&&((c=i.form.get("password"))!=null&&c.touched)?26:-1),m(3),v("disabled",i.form.invalid)}},dependencies:[k,U,A,B,q,j,L,M,F,R,D,I,G,J,z],encapsulation:2})};export{Y as LoginComponent};
