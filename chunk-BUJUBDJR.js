import{b as D}from"./chunk-4WVCJUFC.js";import{i as k}from"./chunk-SPPYWUOE.js";import{b as x,d as R}from"./chunk-DAWSGMBR.js";import{a as N}from"./chunk-L3V7LWUT.js";import{a as T,b as q}from"./chunk-MS4GMOMR.js";import"./chunk-BGKHSOXA.js";import{b as C,c,d as P,e as _,f as y,h as F,i as E,m as A,n as L,o as j,p as I}from"./chunk-7WT757UQ.js";import{a as M}from"./chunk-WRBWQDOP.js";import{a as S}from"./chunk-S4Z3L45U.js";import{n as g}from"./chunk-VGTGXULN.js";import{Eb as s,Ja as p,N as v,T as r,Ua as w,Za as b,db as l,ib as h,mb as o,nb as i,ob as d,wb as f}from"./chunk-SNWDAWOK.js";var u=class n{environments=N;http=r(S);resetPassword(a,e){return this.http.patch(`${this.environments.URL_RESET_PASSWORD}/${e}`,a)}static \u0275fac=function(e){return new(e||n)};static \u0275prov=v({token:n,factory:n.\u0275fac,providedIn:"root"})};function O(n,a){n&1&&(o(0,"p",8),s(1,"Este campo es requerido"),i())}var V=class n{route=r(x);router=r(R);fb=r(L);resetPasswordService=r(u);recaptchaService=r(D);activateLoader=r(M);faArrowLeft=k;jwtAuth;form=this.fb.group({recaptchaToken:[""],password:["",[c.required,c.minLength(6)]],confirm_password:["",[c.required,c.minLength(6)]]});onSubmitResetPassword(){return this.activateLoader.activateSignal(),this.recaptchaService.execute("submitResetPassword").subscribe(a=>{this.form.get("recaptchaToken")?.setValue(a),this.recaptchaService.execute("submitResetPassword").subscribe(e=>{this.form.get("recaptchaToken")?.setValue(e),this.resetPasswordService.resetPassword(this.form.value,this.jwtAuth).subscribe({next:t=>{},complete:()=>{this.activateLoader.deactivateSignal(),this.router.navigate(["/"])},error:t=>{console.error("Error en la solicitud de login:",t),this.activateLoader.deactivateSignal()}})})})}ngOnDestroy(){this.onSubmitResetPassword().unsubscribe()}ngOnInit(){this.jwtAuth=this.route.snapshot.paramMap.get("token")}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=w({type:n,selectors:[["app-reset-password"]],decls:22,vars:4,consts:[[1,"w-screen","min-h-screen","h-full","flex","items-center","justify-center"],[1,"w-80","h-fit","bg-color","rounded-xl","shadow-xl","p-2"],[1,"text-center","uppercase","text-2xl","font-bold","p-5"],[1,"text-center","p-5"],[1,"flex","flex-col","justify-between","gap-10","p-3",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-5"],["for","password",1,"block","mt-2","mb-3","text-xl"],["type","password","id","password","name","password","formControlName","password","placeholder","Escribe tu contrase\xF1a","required","",1,"input-behavior"],[1,"text-red-500","text-xs"],["type","password","id","confirm_password","name","confirm_password","formControlName","confirm_password","placeholder","Confirmar contrase\xF1a","required","",1,"input-behavior"],[1,"flex","items-center","justify-between","pt-5"],["type","submit",1,"bg-color-button","pt-5","pb-5","capitalize",3,"disabled"],[1,"text-sm","font-bold"],[1,"cursor-pointer","hover:text-blue-500",3,"click"],[3,"icon"]],template:function(e,t){if(e&1&&(o(0,"div",0)(1,"div",1)(2,"h2",2),s(3,"Cambiar contrase\xF1a"),i(),o(4,"p",3),s(5,"Ingresa los datos para cambiar tu contrase\xF1a"),i(),o(6,"form",4),f("ngSubmit",function(){return t.onSubmitResetPassword()}),o(7,"div",5)(8,"div")(9,"label",6),s(10,"Ingresa tu nueva contrase\xF1a"),i(),d(11,"input",7),b(12,O,2,0,"p",8),i(),o(13,"div"),d(14,"input",9),i()(),o(15,"div",10)(16,"button",11),s(17," cambiar contrase\xF1a "),i()(),o(18,"p",12)(19,"span",13),f("click",function(){return t.router.navigate(["/"])}),d(20,"fa-icon",14),s(21," ir a ingresar "),i()()()()()),e&2){let m;p(6),l("formGroup",t.form),p(6),h((m=t.form.get("password"))!=null&&m.hasError("required")&&((m=t.form.get("password"))!=null&&m.touched)?12:-1),p(4),l("disabled",t.form.invalid),p(4),l("icon",t.faArrowLeft)}},dependencies:[g,j,y,C,P,_,A,I,F,E,q,T],encapsulation:2})};export{V as ResetPasswordComponent};
