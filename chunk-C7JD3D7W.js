import{a as Z}from"./chunk-X75HWY4L.js";import{a as N,b as p,c as T,d as j,e as q,f as G,g as D,h as P,i as R,j as V,k as A,m as X}from"./chunk-K3QTQUGB.js";import{a as K,b as Y}from"./chunk-SPLDK465.js";import{c as B,d as O,h as U,j as H,l as z,p as J}from"./chunk-SPPYWUOE.js";import{a as Q,b as W}from"./chunk-TCIJYHQS.js";import{a as $}from"./chunk-KJDIRWLM.js";import{d as I}from"./chunk-D4SRA5KC.js";import{a as M}from"./chunk-EXBLXLJA.js";import{h as L,m as F}from"./chunk-DFY4U5TG.js";import{Db as E,Ia as m,N as w,Na as k,Sa as x,T as s,Xa as _,bb as d,fb as h,jb as t,kb as i,lb as c,ma as b,qb as u,yb as r}from"./chunk-5MEIZERQ.js";var S=class o{environments=K;http=s(M);seePass=b(!1);login(n){return this.http.post(this.environments.URL_LOGIN,n.value)}seePassword(){this.seePass.update(n=>!n)}static \u0275fac=function(a){return new(a||o)};static \u0275prov=w({token:o,factory:o.\u0275fac,providedIn:"root"})};var ee=o=>({"border-red-500!":o});function ie(o,n){o&1&&(t(0,"p",15),r(1,"Este campo es requerido"),i())}function oe(o,n){o&1&&(t(0,"p",15),r(1,"El formato de correo es invalido"),i())}function re(o,n){o&1&&(t(0,"p",15),r(1,"Este campo es requerido"),i())}var C=class o{constructor(n){this.darkModeService=n}value="";password="";faBars=B;faSun=H;faMoon=J;faGrip=z;faEye=U;faEyeSlash=O;datosUser=b(null);fb=s(R);recaptchaService=s(X);activateLoader=s(Y);toast=s(Z);loginService=s(S);router=s(I);ngOnInit(){this.activateLoader.deactivateSignal()}ngOnDestroy(){this.onSubmitLogin().unsubscribe()}form=this.fb.group({email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]],recaptchaToken:[""]});onSubmitLogin(){return this.activateLoader.activateSignal(),this.recaptchaService.execute("submitLogin").subscribe(n=>{this.form.get("recaptchaToken")?.setValue(n),this.loginService.login(this.form).subscribe({next:a=>{this.datosUser.set(a),localStorage.setItem("auth_token",a.token)},complete:()=>{this.router.navigate(["/dashboard"]),this.activateLoader.deactivateSignal()},error:a=>{console.error("Error en la solicitud de login:",a),this.activateLoader.deactivateSignal(),localStorage.removeItem("auth_token"),this.toast.show({message:a.error.message,icon:"",color:"error",duration:5e3})}})})}retrieveAccount(){this.router.navigate(["/retrieve-account"])}registration(){this.router.navigate(["/register"])}static \u0275fac=function(a){return new(a||o)(k($))};static \u0275cmp=x({type:o,selectors:[["app-login"]],decls:38,vars:14,consts:[[1,"md:p-4","sm:pt-0","flex","items-center","justify-center","w-full","md:h-screen","bg-color-general"],[1,"cursor-pointer","absolute","top-2","right-2",3,"click"],[3,"icon"],[1,"w-full","h-screen","max-w-5xl","min-h-[50vh]","grid","grid-cols-1","md:grid-cols-2","items-center","justify-center","md:h-fit","overflow-hidden","bg-color","md:rounded-2xl","shadow-xl"],[1,"bg-color","shadow-xl","bg-color-custom","absolute","items-center","justify-center","text-center","top-0","left-0","h-[15rem]","w-full","md:relative","flex","md:w-full","rounded-b-[5rem]","md:rounded-bl-none","md:h-full","md:rounded-r-[15rem]"],[1,"flex","flex-col","items-center","gap-5"],[1,"font-bold","text-4xl"],[1,"text-xl"],[1,"button-behavior",3,"click"],[1,"rounded-2xl","pt-[15rem]","md:pt-0","p-7","md:pb-10","w-full"],[1,"flex","flex-col","justify-center",3,"ngSubmit","formGroup"],[1,"h2","mb-5","text-center"],["for","email",1,"label-behavior"],[1,"mb-10","relative"],["type","email","id","email","name","email","formControlName","email","placeholder","Escribe tu correo","required","",1,"input-behavior",3,"ngClass"],[1,"text-red-500","text-sm","mt-2","absolute"],["for","password",1,"label-behavior"],[1,"absolute","inset-y-0","end-3","flex","items-center","ps-3.5","cursor-pointer",3,"click"],["id","password","name","password","formControlName","password","placeholder","Escribe tu contrase\xF1a","required","",1,"input-behavior",3,"type","ngClass"],[1,"flex","items-center","justify-between"],[1,""],["type","submit",1,"bg-color-button","pt-5","pb-5",3,"disabled"],[1,"flex","justify-between","items-center","pt-3"],[1,"text-stone-800","cursor-pointer","dark:text-stone-100","text-sm","hover:text-blue-500",3,"click"],[1,"text-stone-800","dark:text-stone-100","text-sm"]],template:function(a,e){if(a&1&&(t(0,"div",0)(1,"button",1),u("click",function(){return e.darkModeService.toggleDarkMode()}),c(2,"fa-icon",2),i(),t(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2",6),r(7,"Bienvenido!"),i(),t(8,"p",7),r(9,"Inicia sesi\xF3n para continuar"),i(),t(10,"button",8),u("click",function(){return e.registration()}),r(11,"\xBFNo tienes cuenta?"),i()()(),t(12,"div",9)(13,"form",10),u("ngSubmit",function(){return e.onSubmitLogin()}),t(14,"h2",11),r(15,"Ingreso"),i(),t(16,"label",12),r(17,"Correo"),i(),t(18,"div",13),c(19,"input",14),_(20,ie,2,0,"p",15)(21,oe,2,0,"p",15),i(),t(22,"label",16),r(23,"Contrase\xF1a"),i(),t(24,"div",13)(25,"div",17),u("click",function(){return e.loginService.seePassword()}),c(26,"fa-icon",2),i(),c(27,"input",18),_(28,re,2,0,"p",15),i(),c(29,"div",19),t(30,"div",20)(31,"button",21),r(32," Entrar "),i()()(),t(33,"div",22)(34,"button",23),u("click",function(){return e.retrieveAccount()}),r(35,"Recuperar cuenta"),i(),t(36,"button",24),r(37,"Contactanos"),i()()()()()),a&2){let l,f,y,g,v;m(2),d("icon",e.darkModeService.darkMode()?e.faSun:e.faMoon),m(11),d("formGroup",e.form),m(6),d("ngClass",E(10,ee,((l=e.form.get("email"))==null?null:l.hasError("required"))&&((l=e.form.get("email"))==null?null:l.touched)||((l=e.form.get("email"))==null?null:l.hasError("email")))),m(),h((f=e.form.get("email"))!=null&&f.hasError("required")&&((f=e.form.get("email"))!=null&&f.touched)?20:-1),m(),h((y=e.form.get("email"))!=null&&y.hasError("email")?21:-1),m(5),d("icon",e.loginService.seePass()?e.faEyeSlash:e.faEye),m(),d("type",e.loginService.seePass()?"text":"password")("ngClass",E(12,ee,((g=e.form.get("password"))==null?null:g.hasError("required"))&&((g=e.form.get("password"))==null?null:g.touched))),m(),h((v=e.form.get("password"))!=null&&v.hasError("required")&&((v=e.form.get("password"))!=null&&v.touched)?28:-1),m(3),d("disabled",e.form.invalid)}},dependencies:[F,L,V,q,N,T,j,P,A,G,D,W,Q],encapsulation:2})};export{C as default};
