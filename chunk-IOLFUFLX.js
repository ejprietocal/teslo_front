import{h as N}from"./chunk-YOH5PNVA.js";import{b as C,c,e as R,f as P,h as _,i as F,j as E,k as A,l as L,m as j,n as I,p as V}from"./chunk-C2N476V2.js";import{a as M,b as q}from"./chunk-VPBFP2TJ.js";import{a as S,h as x,j as y,ja as k,oa as T,pa as D}from"./chunk-XJA2CUA5.js";import{o as g}from"./chunk-IELTSNR6.js";import{Cb as n,Ga as p,M as v,Qa as h,S as r,Va as w,ab as l,fb as b,jb as o,kb as i,lb as d,tb as f}from"./chunk-F6KDSXUI.js";var u=class a{environments=T;http=r(S);resetPassword(s,t){return this.http.patch(`${this.environments.URL_RESET_PASSWORD}/${t}`,s)}static \u0275fac=function(t){return new(t||a)};static \u0275prov=v({token:a,factory:a.\u0275fac,providedIn:"root"})};function $(a,s){a&1&&(o(0,"p",8),n(1,"Este campo es requerido"),i())}var G=class a{route=r(x);router=r(y);fb=r(L);resetPasswordService=r(u);recaptchaService=r(V);activateLoader=r(D);messageService=r(k);faArrowLeft=N;jwtAuth;form=this.fb.group({recaptchaToken:[""],password:["",[c.required,c.minLength(6)]],confirm_password:["",[c.required,c.minLength(6)]]});onSubmitResetPassword(){return this.activateLoader.activateSignal(),this.recaptchaService.execute("submitResetPassword").subscribe(s=>{this.form.get("recaptchaToken")?.setValue(s),this.recaptchaService.execute("submitResetPassword").subscribe(t=>{this.form.get("recaptchaToken")?.setValue(t),this.resetPasswordService.resetPassword(this.form.value,this.jwtAuth).subscribe({next:e=>{this.messageService.add({severity:"success",summary:"\xC9xito",detail:"Tu cuenta ha sido recuperada, por favor ingresa con tu nueva contrase\xF1a",life:5e3})},complete:()=>{this.activateLoader.deactivateSignal(),this.router.navigate(["/"])},error:e=>{console.error("Error en la solicitud de login:",e),this.activateLoader.deactivateSignal(),this.messageService.add({severity:"error",summary:"Error",detail:e.error.message,life:2e3})}})})})}ngOnInit(){this.jwtAuth=this.route.snapshot.paramMap.get("token")}static \u0275fac=function(t){return new(t||a)};static \u0275cmp=h({type:a,selectors:[["app-reset-password"]],decls:22,vars:4,consts:[[1,"w-screen","min-h-screen","h-full","flex","items-center","justify-center"],[1,"w-80","h-fit","bg-color","rounded-xl","shadow-xl","p-2"],[1,"text-center","uppercase","text-2xl","font-bold","p-5"],[1,"text-center","p-5"],[1,"flex","flex-col","justify-between","gap-10","p-3",3,"ngSubmit","formGroup"],[1,"flex","flex-col","gap-5"],["for","password",1,"block","mt-2","mb-3","text-xl"],["type","password","id","password","name","password","formControlName","password","placeholder","Escribe tu contrase\xF1a","required","",1,"input-behavior"],[1,"text-red-500","text-xs"],["type","password","id","confirm_password","name","confirm_password","formControlName","confirm_password","placeholder","Confirmar contrase\xF1a","required","",1,"input-behavior"],[1,"flex","items-center","justify-between","pt-5"],["type","submit",1,"bg-color-button","pt-5","pb-5","capitalize",3,"disabled"],[1,"text-sm","font-bold"],[1,"cursor-pointer","hover:text-blue-500",3,"click"],[3,"icon"]],template:function(t,e){if(t&1&&(o(0,"div",0)(1,"div",1)(2,"h2",2),n(3,"Cambiar contrase\xF1a"),i(),o(4,"p",3),n(5,"Ingresa los datos para cambiar tu contrase\xF1a"),i(),o(6,"form",4),f("ngSubmit",function(){return e.onSubmitResetPassword()}),o(7,"div",5)(8,"div")(9,"label",6),n(10,"Ingresa tu nueva contrase\xF1a"),i(),d(11,"input",7),w(12,$,2,0,"p",8),i(),o(13,"div"),d(14,"input",9),i()(),o(15,"div",10)(16,"button",11),n(17," cambiar contrase\xF1a "),i()(),o(18,"p",12)(19,"span",13),f("click",function(){return e.router.navigate(["/"])}),d(20,"fa-icon",14),n(21," ir a ingresar "),i()()()()()),t&2){let m;p(6),l("formGroup",e.form),p(6),b((m=e.form.get("password"))!=null&&m.hasError("required")&&((m=e.form.get("password"))!=null&&m.touched)?12:-1),p(4),l("disabled",e.form.invalid),p(4),l("icon",e.faArrowLeft)}},dependencies:[g,j,_,C,R,P,A,I,F,E,q,M],encapsulation:2})};export{G as ResetPasswordComponent};
