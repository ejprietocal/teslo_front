import{a as Y}from"./chunk-FSYD2BTU.js";import{a as Z}from"./chunk-TGDN5F4T.js";import{c as A,d as B,h as O,k as U,l as H,o as z}from"./chunk-CXPWEDHU.js";import{a as I,b as p,c as N,d as T,e as q,f as G,g as j,h as D,i as P,j as R,k as V,m as W}from"./chunk-IATGTTP5.js";import{a as K,b as Q}from"./chunk-2GEF7WUZ.js";import{a as F,j as M,m as J,n as X}from"./chunk-EVCG5KFL.js";import{g as x,l as L}from"./chunk-A7SWIZTN.js";import{$a as d,Ga as m,La as w,M as y,Qa as k,S as s,Va as _,cb as h,gb as t,hb as i,ib as c,ka as b,nb as u,ub as r,yb as E}from"./chunk-F233ZM4U.js";var S=class o{environments=J;http=s(F);seePass=b(!1);login(n){return this.http.post(this.environments.URL_LOGIN,n.value)}seePassword(){this.seePass.update(n=>!n)}static \u0275fac=function(a){return new(a||o)};static \u0275prov=y({token:o,factory:o.\u0275fac,providedIn:"root"})};var $=o=>({"border-red-500!":o});function ie(o,n){o&1&&(t(0,"p",15),r(1,"Este campo es requerido"),i())}function oe(o,n){o&1&&(t(0,"p",15),r(1,"El formato de correo es invalido"),i())}function re(o,n){o&1&&(t(0,"p",15),r(1,"Este campo es requerido"),i())}var ee=class o{constructor(n){this.darkModeService=n}value="";password="";faBars=A;faSun=U;faMoon=z;faGrip=H;faEye=O;faEyeSlash=B;datosUser=b(null);fb=s(P);recaptchaService=s(W);activateLoader=s(X);toast=s(Y);loginService=s(S);router=s(M);ngOnInit(){this.activateLoader.deactivateSignal()}ngOnDestroy(){this.onSubmitLogin().unsubscribe()}form=this.fb.group({email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]],recaptchaToken:[""]});onSubmitLogin(){return this.activateLoader.activateSignal(),this.recaptchaService.execute("submitLogin").subscribe(n=>{this.form.get("recaptchaToken")?.setValue(n),this.loginService.login(this.form).subscribe({next:a=>{this.datosUser.set(a),localStorage.setItem("auth_token",a.token)},complete:()=>{this.router.navigate(["/dashboard"]),this.activateLoader.deactivateSignal()},error:a=>{console.error("Error en la solicitud de login:",a),this.activateLoader.deactivateSignal(),localStorage.removeItem("auth_token"),this.toast.show({message:a.error.message,icon:"",color:"error",duration:5e3})}})})}retrieveAccount(){this.router.navigate(["/retrieve-account"])}registration(){this.router.navigate(["/register"])}static \u0275fac=function(a){return new(a||o)(w(Z))};static \u0275cmp=k({type:o,selectors:[["app-login"]],decls:38,vars:14,consts:[[1,"md:p-4","sm:pt-0","flex","items-center","justify-center","w-full","md:h-screen","bg-color-general"],[1,"cursor-pointer","absolute","top-2","right-2",3,"click"],[3,"icon"],[1,"w-full","h-screen","max-w-5xl","grid","grid-cols-1","md:grid-cols-2","items-center","justify-center","md:h-fit","overflow-hidden","bg-color","md:rounded-2xl","shadow-xl"],[1,"bg-color","shadow-xl","bg-color-custom","absolute","items-center","justify-center","text-center","top-0","left-0","h-[15rem]","w-full","md:relative","flex","md:w-full","rounded-b-[5rem]","md:rounded-bl-none","md:h-full","md:rounded-r-[15rem]"],[1,"flex","flex-col","items-center","gap-5"],[1,"font-bold","text-4xl"],[1,"text-xl"],[1,"button-behavior",3,"click"],[1,"rounded-2xl","pt-[15rem]","md:pt-0","p-7","md:pb-10","w-full"],[3,"ngSubmit","formGroup"],[1,"font-bold","text-center","uppercase","p-5","text-2xl"],["for","email",1,"label-behavior"],[1,"mb-10","relative"],["type","email","id","email","name","email","formControlName","email","placeholder","Escribe tu correo","required","",1,"input-behavior",3,"ngClass"],[1,"text-red-500","text-sm","mt-2","absolute"],["for","password",1,"label-behavior"],[1,"absolute","inset-y-0","end-3","flex","items-center","ps-3.5","cursor-pointer",3,"click"],["id","password","name","password","formControlName","password","placeholder","Escribe tu contrase\xF1a","required","",1,"input-behavior",3,"type","ngClass"],[1,"flex","items-center","justify-between"],[1,""],["type","submit",1,"bg-color-button","pt-5","pb-5",3,"disabled"],[1,"flex","justify-between","items-center","pt-3"],[1,"text-stone-800","cursor-pointer","dark:text-stone-100","text-sm","hover:text-blue-500",3,"click"],[1,"text-stone-800","dark:text-stone-100","text-sm"]],template:function(a,e){if(a&1&&(t(0,"div",0)(1,"button",1),u("click",function(){return e.darkModeService.toggleDarkMode()}),c(2,"fa-icon",2),i(),t(3,"div",3)(4,"div",4)(5,"div",5)(6,"h2",6),r(7,"Bienvenido!"),i(),t(8,"p",7),r(9,"Inicia sesi\xF3n para continuar"),i(),t(10,"button",8),u("click",function(){return e.registration()}),r(11,"\xBFNo tienes cuenta?"),i()()(),t(12,"div",9)(13,"form",10),u("ngSubmit",function(){return e.onSubmitLogin()}),t(14,"h3",11),r(15,"Ingreso"),i(),t(16,"label",12),r(17,"Correo"),i(),t(18,"div",13),c(19,"input",14),_(20,ie,2,0,"p",15)(21,oe,2,0,"p",15),i(),t(22,"label",16),r(23,"Contrase\xF1a"),i(),t(24,"div",13)(25,"div",17),u("click",function(){return e.loginService.seePassword()}),c(26,"fa-icon",2),i(),c(27,"input",18),_(28,re,2,0,"p",15),i(),c(29,"div",19),t(30,"div",20)(31,"button",21),r(32," Entrar "),i()()(),t(33,"div",22)(34,"button",23),u("click",function(){return e.retrieveAccount()}),r(35,"Recuperar cuenta"),i(),t(36,"button",24),r(37,"Contactanos"),i()()()()()),a&2){let l,f,C,g,v;m(2),d("icon",e.darkModeService.darkMode()?e.faSun:e.faMoon),m(11),d("formGroup",e.form),m(6),d("ngClass",E(10,$,((l=e.form.get("email"))==null?null:l.hasError("required"))&&((l=e.form.get("email"))==null?null:l.touched)||((l=e.form.get("email"))==null?null:l.hasError("email")))),m(),h((f=e.form.get("email"))!=null&&f.hasError("required")&&((f=e.form.get("email"))!=null&&f.touched)?20:-1),m(),h((C=e.form.get("email"))!=null&&C.hasError("email")?21:-1),m(5),d("icon",e.loginService.seePass()?e.faEyeSlash:e.faEye),m(),d("type",e.loginService.seePass()?"text":"password")("ngClass",E(12,$,((g=e.form.get("password"))==null?null:g.hasError("required"))&&((g=e.form.get("password"))==null?null:g.touched))),m(),h((v=e.form.get("password"))!=null&&v.hasError("required")&&((v=e.form.get("password"))!=null&&v.touched)?28:-1),m(3),d("disabled",e.form.invalid)}},dependencies:[L,x,R,q,I,N,T,D,V,G,j,Q,K],encapsulation:2})};export{ee as LoginComponent};
